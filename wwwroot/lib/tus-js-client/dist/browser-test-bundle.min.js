/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/tus-js-client@3.0.1/dist/browser-test-bundle.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function e(t,r,n){function o(i,a){if(!r[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[i]={exports:{}};t[i][0].call(l.exports,(function(e){return o(t[i][1][e]||e)}),l,l.exports,e,t,r,n)}return r[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("./isReactNative.js")),o=a(e("./uriToBlob.js")),s=a(e("./sources/FileSource.js")),i=a(e("./sources/StreamSource.js"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"openFile",value:function(e,t){return(0,n.default)()&&e&&void 0!==e.uri?(0,o.default)(e.uri).then((function(e){return new s.default(e)})).catch((function(e){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e))})):"function"==typeof e.slice&&void 0!==e.size?Promise.resolve(new s.default(e)):"function"==typeof e.read?(t=Number(t),Number.isFinite(t)?Promise.resolve(new i.default(e,t)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"))}}])&&u(t.prototype,r),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();r.default=c},{"./isReactNative.js":5,"./sources/FileSource.js":6,"./sources/StreamSource.js":7,"./uriToBlob.js":10}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,o.default)())return Promise.resolve(function(e,t){var r=e.exif?function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",r,t.endpoint].join("/")}(e,t));return Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))};var n,o=(n=e("./isReactNative.js"))&&n.__esModule?n:{default:n}},{"./isReactNative.js":5}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(){function e(){n(this,e)}return s(e,[{key:"createRequest",value:function(e,t){return new a(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}();r.default=i;var a=function(){function e(t,r){n(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,r,!0),this._method=t,this._url=r,this._headers={}}return s(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(r,n){e._xhr.onload=function(){r(new u(e._xhr))},e._xhr.onerror=function(e){n(e)},e._xhr.send(t)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),u=function(){function e(t){n(this,e),this._xhr=t}return s(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}()},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"DefaultHttpStack",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"DetailedError",{enumerable:!0,get:function(){return i.default}}),r.Upload=void 0,Object.defineProperty(r,"canStoreURLs",{enumerable:!0,get:function(){return a.canStoreURLs}}),r.defaultOptions=void 0,Object.defineProperty(r,"enableDebugLog",{enumerable:!0,get:function(){return s.enableDebugLog}}),r.isSupported=void 0;var n=p(e("../upload.js")),o=p(e("../noopUrlStorage.js")),s=e("../logger.js"),i=p(e("../error.js")),a=e("./urlStorage.js"),u=p(e("./httpStack.js")),c=p(e("./fileReader.js")),l=p(e("./fileSignature.js"));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B=w(w({},n.default.defaultOptions),{},{httpStack:new u.default,fileReader:new c.default,urlStorage:a.canStoreURLs?new a.WebStorageUrlStorage:new o.default,fingerprint:l.default});r.defaultOptions=B;var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(i,e);var t,r,o,s=v(i);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(this,i),t=w(w({},B),t),s.call(this,e,t)}return t=i,o=[{key:"terminate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=w(w({},B),t),n.default.terminate(e,t)}}],(r=null)&&d(t.prototype,r),o&&d(t,o),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.default);r.Upload=E;var S=window,U=S.XMLHttpRequest,O=S.Blob,_=U&&O&&"function"==typeof O.prototype.slice;r.isSupported=_},{"../error.js":12,"../logger.js":13,"../noopUrlStorage.js":14,"../upload.js":15,"./fileReader.js":1,"./fileSignature.js":2,"./httpStack.js":3,"./urlStorage.js":11}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};r.default=n},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./isCordova.js")),o=s(e("./readAsByteArray.js"));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._file=t,this.size=t.size}var t,r,s;return t=e,(r=[{key:"slice",value:function(e,t){if((0,n.default)())return(0,o.default)(this._file.slice(e,t));var r=this._file.slice(e,t);return Promise.resolve({value:r})}},{key:"close",value:function(){}}])&&i(t.prototype,r),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();r.default=a},{"./isCordova.js":8,"./readAsByteArray.js":9}],7:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return void 0===e?0:void 0!==e.size?e.size:e.length}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}var t,r,s;return t=e,(r=[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var r=this,n=t<=this._bufferOffset+o(this._buffer);if(this._done||n){var s=this._getDataFromBuffer(e,t),i=null==s&&this._done;return Promise.resolve({value:s,done:i})}return this._reader.read().then((function(n){var o=n.value;return n.done?r._done=!0:void 0===r._buffer?r._buffer=o:r._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}throw new Error("Unknown data type")}(r._buffer,o),r._readUntilEnoughDataOrDone(e,t)}))}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var r=0===o(this._buffer);return this._done&&r?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])&&n(t.prototype,r),s&&n(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();r.default=s},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)};r.default=n},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(){var e=new Uint8Array(n.result);t({value:e})},n.onerror=function(e){r(e)},n.readAsArrayBuffer(e)}))}},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return new Promise((function(t,r){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var e=n.response;t(e)},n.onerror=function(e){r(e)},n.open("GET",e),n.send()}))}},{}],11:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.canStoreURLs=r.WebStorageUrlStorage=void 0;var o=!1;try{o="localStorage"in window;var s="tusSupport";localStorage.setItem(s,localStorage.getItem(s))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;o=!1}var i=o;r.canStoreURLs=i;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,r=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var r=Math.round(1e12*Math.random()),n="tus::".concat(e,"::").concat(r);return localStorage.setItem(n,JSON.stringify(t)),Promise.resolve(n)}},{key:"_findEntries",value:function(e){for(var t=[],r=0;r<localStorage.length;r++){var n=localStorage.key(r);if(0===n.indexOf(e))try{var o=JSON.parse(localStorage.getItem(n));o.urlStorageKey=n,t.push(o)}catch(e){}}return t}}],r&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();r.WebStorageUrlStorage=a},{}],12:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)},a(e)}function u(e,t,r){return u=c()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&l(o,r.prototype),o},u.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(h,e);var t,r,n,a,u,f=(t=h,r=c(),function(){var e,n=p(t);if(r){var o=p(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return i(this,e)});function h(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(s(this,h),(t=f.call(this,e)).originalRequest=n,t.originalResponse=o,t.causingError=r,null!=r&&(e+=", caused by ".concat(r.toString())),null!=n){var i=n.getHeader("X-Request-ID")||"n/a",a=n.getMethod(),u=n.getURL(),c=o?o.getStatus():"n/a",l=o?o.getBody()||"":"n/a";e+=", originated from request (method: ".concat(a,", url: ").concat(u,", response code: ").concat(c,", response text: ").concat(l,", request id: ").concat(i,")")}return t.message=e,t}return n=h,a&&o(n.prototype,a),u&&o(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n}(a(Error)),h=f;r.default=h},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enableDebugLog=function(){n=!0},r.log=function(e){if(!n)return;console.log(e)};var n=!1},{}],14:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();r.default=o},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("js-base64"),o=u(e("url-parse")),s=u(e("./error.js")),i=e("./logger.js"),a=u(e("./uuid.js"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},v=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in r&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=r,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var t,r,n;return t=e,r=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then((function(t){return e._urlStorage.findUploadsByFingerprint(t)}))}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl||this.url){var r=this.options.retryDelays;if(null==r||"[object Array]"===Object.prototype.toString.call(r)){if(this.options.parallelUploads>1)for(var n=0,o=["uploadUrl","uploadSize","uploadLengthDeferred"];n<o.length;n++){var s=o[n];if(this.options[s])return void this._emitError(new Error("tus: cannot use the ".concat(s," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(t,this.options).then((function(r){return null==r?(0,i.log)("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):(0,i.log)("Calculated fingerprint: ".concat(r)),e._fingerprint=r,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)})).then((function(t){if(e._source=t,e.options.uploadLengthDeferred)e._size=null;else if(null!=e.options.uploadSize){if(e._size=Number(e.options.uploadSize),Number.isNaN(e._size))return void e._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(e._size=e._source.size,null==e._size)return void e._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()})).catch((function(t){e._emitError(t)}))}else this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t,r=this,n=this._size,o=0;this._parallelUploads=[];var s=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,a=null!==(t=this.options.parallelUploadBoundaries)&&void 0!==t?t:function(e,t){for(var r=Math.floor(e/t),n=[],o=0;o<t;o++)n.push({start:r*o,end:r*(o+1)});return n[t-1].end=e,n}(this._source.size,s);this._parallelUploadUrls&&a.forEach((function(e,t){e.uploadUrl=r._parallelUploadUrls[t]||null})),this._parallelUploadUrls=new Array(a.length);var u,c=a.map((function(t,s){var i=0;return r._source.slice(t.start,t.end).then((function(u){var c=u.value;return new Promise((function(u,l){var p=f(f({},r.options),{},{uploadUrl:t.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:f(f({},r.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:u,onError:l,onProgress:function(e){o=o-i+e,i=e,r._emitProgress(o,n)},_onUploadUrlAvailable:function(){r._parallelUploadUrls[s]=h.url,r._parallelUploadUrls.filter((function(e){return Boolean(e)})).length===a.length&&r._saveUploadInUrlStorage()}}),h=new e(c,p);h.start(),r._parallelUploads.push(h)}))}))}));Promise.all(c).then((function(){(u=r._openRequest("POST",r.options.endpoint)).setHeader("Upload-Concat","final;".concat(r._parallelUploadUrls.join(" ")));var e=m(r.options.metadata);return""!==e&&u.setHeader("Upload-Metadata",e),r._sendRequest(u,null)})).then((function(e){if(g(e.getStatus(),200)){var t=e.getHeader("Location");null!=t?(r.url=B(r.options.endpoint,t),(0,i.log)("Created upload at ".concat(r.url)),r._emitSuccess()):r._emitHttpError(u,e,"tus: invalid or missing Location header")}else r._emitHttpError(u,e,"tus: unexpected response while creating upload")})).catch((function(e){r._emitError(e)}))}},{key:"_startSingleUpload",value:function(){return this._aborted=!1,null!=this.url?((0,i.log)("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?((0,i.log)("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,void this._resumeUpload()):((0,i.log)("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(t){var r=this;return null!=this._parallelUploads&&this._parallelUploads.forEach((function(e){e.abort(t)})),null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then((function(){return r._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,r,n){this._emitError(new s.default(r,n,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),b(e,this._retryAttempt,this.options))){var r=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){t.start()}),r))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,r)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var r,n=m(this.options.metadata);""!==n&&t.setHeader("Upload-Metadata",n),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,r=this._addChunkToRequest(t)):r=this._sendRequest(t,null),r.then((function(r){if(g(r.getStatus(),200)){var n=r.getHeader("Location");if(null!=n){if(e.url=B(e.options.endpoint,n),(0,i.log)("Created upload at ".concat(e.url)),"function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage().then((function(){e.options.uploadDataDuringCreation?e._handleUploadResponse(t,r):(e._offset=0,e._performUpload())}))}else e._emitHttpError(t,r,"tus: invalid or missing Location header")}else e._emitHttpError(t,r,"tus: unexpected response while creating upload")})).catch((function(r){e._emitHttpError(t,null,"tus: failed to create upload",r)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then((function(r){var n=r.getStatus();if(!g(n,200))return 423===n?void e._emitHttpError(t,r,"tus: upload is currently locked; retry later"):(g(n,400)&&e._removeFromUrlStorage(),e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,r,"tus: unable to resume upload (new upload cannot be created without an endpoint)"));var o=parseInt(r.getHeader("Upload-Offset"),10);if(Number.isNaN(o))e._emitHttpError(t,r,"tus: invalid or missing offset value");else{var s=parseInt(r.getHeader("Upload-Length"),10);!Number.isNaN(s)||e.options.uploadLengthDeferred?("function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),e._saveUploadInUrlStorage().then((function(){if(o===s)return e._emitProgress(s,s),void e._emitSuccess();e._offset=o,e._performUpload()}))):e._emitHttpError(t,r,"tus: invalid or missing length value")}})).catch((function(r){e._emitHttpError(t,null,"tus: failed to resume upload",r)}))}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then((function(r){g(r.getStatus(),200)?t._handleUploadResponse(e,r):t._emitHttpError(e,r,"tus: unexpected response while uploading chunk")})).catch((function(r){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset ".concat(t._offset),r)})))}},{key:"_addChunkToRequest",value:function(e){var t=this,r=this._offset,n=this._offset+this.options.chunkSize;return e.setProgressHandler((function(e){t._emitProgress(r+e,t._size)})),e.setHeader("Content-Type","application/offset+octet-stream"),(n===1/0||n>this._size)&&!this.options.uploadLengthDeferred&&(n=this._size),this._source.slice(r,n).then((function(r){var n=r.value,o=r.done;return t.options.uploadLengthDeferred&&o&&(t._size=t._offset+(n&&n.size?n.size:0),e.setHeader("Upload-Length",t._size)),null===n?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,n))}))}},{key:"_handleUploadResponse",value:function(e,t){var r=parseInt(t.getHeader("Upload-Offset"),10);if(Number.isNaN(r))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r===this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var r=x(e,t,this.options);return this._req=r,r}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(t){e._emitError(t)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};return this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then((function(t){e._urlStorageKey=t}))}},{key:"_sendRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return w(e,t,this.options)}}],n=[{key:"terminate",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=x("DELETE",t,r);return w(n,null,r).then((function(e){if(204!==e.getStatus())throw new s.default("tus: unexpected response while terminating upload",null,n,e)})).catch((function(o){if(o instanceof s.default||(o=new s.default("tus: failed to terminate upload",o,n,null)),!b(o,0,r))throw o;var i=r.retryDelays[0],a=r.retryDelays.slice(1),u=f(f({},r),{},{retryDelays:a});return new Promise((function(e){return setTimeout(e,i)})).then((function(){return e.terminate(t,u)}))}))}}],r&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return Object.entries(e).map((function(e){var t=c(e,2),r=t[0],o=t[1];return"".concat(r," ").concat(n.Base64.encode(String(o)))})).join(",")}function g(e,t){return e>=t&&e<t+100}function x(e,t,r){var n=r.httpStack.createRequest(e,t);n.setHeader("Tus-Resumable","1.0.0");var o=r.headers||{};if(Object.entries(o).forEach((function(e){var t=c(e,2),r=t[0],o=t[1];n.setHeader(r,o)})),r.addRequestId){var s=(0,a.default)();n.setHeader("X-Request-ID",s)}return n}function w(e,t,r){return("function"==typeof r.onBeforeRequest?Promise.resolve(r.onBeforeRequest(e)):Promise.resolve()).then((function(){return e.send(t).then((function(t){return("function"==typeof r.onAfterResponse?Promise.resolve(r.onAfterResponse(e,t)):Promise.resolve()).then((function(){return t}))}))}))}function b(e,t,r){if(null==r.retryDelays||t>=r.retryDelays.length||null==e.originalRequest)return!1;if(r&&"function"==typeof r.onShouldRetry)return r.onShouldRetry(e,t,r);var n,o=e.originalResponse?e.originalResponse.getStatus():0;return(!g(o,400)||409===o||423===o)&&(n=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1),n)}function B(e,t){return new o.default(t,e).toString()}v.defaultOptions=y;var E=v;r.default=E},{"./error.js":12,"./logger.js":13,"./uuid.js":16,"js-base64":52,"url-parse":57}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},{}],17:[function(e,t,r){t.exports=e("./lib/axios")},{"./lib/axios":19}],18:[function(e,t,r){"use strict";var n=e("./../utils"),o=e("./../core/settle"),s=e("./../helpers/cookies"),i=e("./../helpers/buildURL"),a=e("../core/buildFullPath"),u=e("./../helpers/parseHeaders"),c=e("./../helpers/isURLSameOrigin"),l=e("../defaults/transitional"),p=e("../core/AxiosError"),f=e("../cancel/CanceledError"),h=e("../helpers/parseProtocol");t.exports=function(e){return new Promise((function(t,r){var d,y=e.data,v=e.headers,m=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}n.isFormData(y)&&n.isStandardBrowserEnv()&&delete v["Content-Type"];var x=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(w+":"+b)}var B=a(e.baseURL,e.url);function E(){if(x){var n="getAllResponseHeaders"in x?u(x.getAllResponseHeaders()):null,s={data:m&&"text"!==m&&"json"!==m?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:n,config:e,request:x};o((function(e){t(e),g()}),(function(e){r(e),g()}),s),x=null}}if(x.open(e.method.toUpperCase(),i(B,e.params,e.paramsSerializer),!0),x.timeout=e.timeout,"onloadend"in x?x.onloadend=E:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(E)},x.onabort=function(){x&&(r(new p("Request aborted",p.ECONNABORTED,e,x)),x=null)},x.onerror=function(){r(new p("Network Error",p.ERR_NETWORK,e,x,x)),x=null},x.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(new p(t,n.clarifyTimeoutError?p.ETIMEDOUT:p.ECONNABORTED,e,x)),x=null},n.isStandardBrowserEnv()){var S=(e.withCredentials||c(B))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;S&&(v[e.xsrfHeaderName]=S)}"setRequestHeader"in x&&n.forEach(v,(function(e,t){void 0===y&&"content-type"===t.toLowerCase()?delete v[t]:x.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(x.withCredentials=!!e.withCredentials),m&&"json"!==m&&(x.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&x.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&x.upload&&x.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(e){x&&(r(!e||e&&e.type?new f:e),x.abort(),x=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),y||(y=null);var U=h(B);U&&-1===["http","https","file"].indexOf(U)?r(new p("Unsupported protocol "+U+":",p.ERR_BAD_REQUEST,e)):x.send(y)}))}},{"../cancel/CanceledError":21,"../core/AxiosError":24,"../core/buildFullPath":26,"../defaults/transitional":32,"../helpers/parseProtocol":44,"./../core/settle":29,"./../helpers/buildURL":35,"./../helpers/cookies":37,"./../helpers/isURLSameOrigin":40,"./../helpers/parseHeaders":43,"./../utils":48}],19:[function(e,t,r){"use strict";var n=e("./utils"),o=e("./helpers/bind"),s=e("./core/Axios"),i=e("./core/mergeConfig");var a=function e(t){var r=new s(t),a=o(s.prototype.request,r);return n.extend(a,s.prototype,r),n.extend(a,r),a.create=function(r){return e(i(t,r))},a}(e("./defaults"));a.Axios=s,a.CanceledError=e("./cancel/CanceledError"),a.CancelToken=e("./cancel/CancelToken"),a.isCancel=e("./cancel/isCancel"),a.VERSION=e("./env/data").version,a.toFormData=e("./helpers/toFormData"),a.AxiosError=e("../lib/core/AxiosError"),a.Cancel=a.CanceledError,a.all=function(e){return Promise.all(e)},a.spread=e("./helpers/spread"),a.isAxiosError=e("./helpers/isAxiosError"),t.exports=a,t.exports.default=a},{"../lib/core/AxiosError":24,"./cancel/CancelToken":20,"./cancel/CanceledError":21,"./cancel/isCancel":22,"./core/Axios":23,"./core/mergeConfig":28,"./defaults":31,"./env/data":33,"./helpers/bind":34,"./helpers/isAxiosError":39,"./helpers/spread":45,"./helpers/toFormData":46,"./utils":48}],20:[function(e,t,r){"use strict";var n=e("./CanceledError");function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;this.promise.then((function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},t.exports=o},{"./CanceledError":21}],21:[function(e,t,r){"use strict";var n=e("../core/AxiosError");function o(e){n.call(this,null==e?"canceled":e,n.ERR_CANCELED),this.name="CanceledError"}e("../utils").inherits(o,n,{__CANCEL__:!0}),t.exports=o},{"../core/AxiosError":24,"../utils":48}],22:[function(e,t,r){"use strict";t.exports=function(e){return!(!e||!e.__CANCEL__)}},{}],23:[function(e,t,r){"use strict";var n=e("./../utils"),o=e("../helpers/buildURL"),s=e("./InterceptorManager"),i=e("./dispatchRequest"),a=e("./mergeConfig"),u=e("./buildFullPath"),c=e("../helpers/validator"),l=c.validators;function p(e){this.defaults=e,this.interceptors={request:new s,response:new s}}p.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;void 0!==r&&c.assertOptions(r,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var s,u=[];if(this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)})),!o){var p=[i,void 0];for(Array.prototype.unshift.apply(p,n),p=p.concat(u),s=Promise.resolve(t);p.length;)s=s.then(p.shift(),p.shift());return s}for(var f=t;n.length;){var h=n.shift(),d=n.shift();try{f=h(f)}catch(e){d(e);break}}try{s=i(f)}catch(e){return Promise.reject(e)}for(;u.length;)s=s.then(u.shift(),u.shift());return s},p.prototype.getUri=function(e){e=a(this.defaults,e);var t=u(e.baseURL,e.url);return o(t,e.params,e.paramsSerializer)},n.forEach(["delete","get","head","options"],(function(e){p.prototype[e]=function(t,r){return this.request(a(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,o){return this.request(a(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}p.prototype[e]=t(),p.prototype[e+"Form"]=t(!0)})),t.exports=p},{"../helpers/buildURL":35,"../helpers/validator":47,"./../utils":48,"./InterceptorManager":25,"./buildFullPath":26,"./dispatchRequest":27,"./mergeConfig":28}],24:[function(e,t,r){"use strict";var n=e("../utils");function o(e,t,r,n,o){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}n.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var s=o.prototype,i={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){i[e]={value:e}})),Object.defineProperties(o,i),Object.defineProperty(s,"isAxiosError",{value:!0}),o.from=function(e,t,r,i,a,u){var c=Object.create(s);return n.toFlatObject(e,c,(function(e){return e!==Error.prototype})),o.call(c,e.message,t,r,i,a),c.name=e.name,u&&Object.assign(c,u),c},t.exports=o},{"../utils":48}],25:[function(e,t,r){"use strict";var n=e("./../utils");function o(){this.handlers=[]}o.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},t.exports=o},{"./../utils":48}],26:[function(e,t,r){"use strict";var n=e("../helpers/isAbsoluteURL"),o=e("../helpers/combineURLs");t.exports=function(e,t){return e&&!n(t)?o(e,t):t}},{"../helpers/combineURLs":36,"../helpers/isAbsoluteURL":38}],27:[function(e,t,r){"use strict";var n=e("./../utils"),o=e("./transformData"),s=e("../cancel/isCancel"),i=e("../defaults"),a=e("../cancel/CanceledError");function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}t.exports=function(e){return u(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return u(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(u(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},{"../cancel/CanceledError":21,"../cancel/isCancel":22,"../defaults":31,"./../utils":48,"./transformData":30}],28:[function(e,t,r){"use strict";var n=e("../utils");t.exports=function(e,t){t=t||{};var r={};function o(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function s(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:o(void 0,e[r]):o(e[r],t[r])}function i(e){if(!n.isUndefined(t[e]))return o(void 0,t[e])}function a(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:o(void 0,e[r]):o(void 0,t[r])}function u(r){return r in t?o(e[r],t[r]):r in e?o(void 0,e[r]):void 0}var c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return n.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||s,o=t(e);n.isUndefined(o)&&t!==u||(r[e]=o)})),r}},{"../utils":48}],29:[function(e,t,r){"use strict";var n=e("./AxiosError");t.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(new n("Request failed with status code "+r.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}},{"./AxiosError":24}],30:[function(e,t,r){"use strict";var n=e("./../utils"),o=e("../defaults");t.exports=function(e,t,r){var s=this||o;return n.forEach(r,(function(r){e=r.call(s,e,t)})),e}},{"../defaults":31,"./../utils":48}],31:[function(e,t,r){(function(r){(function(){"use strict";var n=e("../utils"),o=e("../helpers/normalizeHeaderName"),s=e("../core/AxiosError"),i=e("./transitional"),a=e("../helpers/toFormData"),u={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,p={transitional:i,adapter:("undefined"!=typeof XMLHttpRequest?l=e("../adapters/xhr"):void 0!==r&&"[object process]"===Object.prototype.toString.call(r)&&(l=e("../adapters/http")),l),transformRequest:[function(e,t){if(o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e))return e;if(n.isArrayBufferView(e))return e.buffer;if(n.isURLSearchParams(e))return c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var r,s=n.isObject(e),i=t&&t["Content-Type"];if((r=n.isFileList(e))||s&&"multipart/form-data"===i){var u=this.env&&this.env.FormData;return a(r?{"files[]":e}:e,u&&new u)}return s||"application/json"===i?(c(t,"application/json"),function(e,t,r){if(n.isString(e))try{return(t||JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||p.transitional,r=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,i=!r&&"json"===this.responseType;if(i||o&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw s.from(e,s.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:e("./env/FormData")},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){p.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){p.headers[e]=n.merge(u)})),t.exports=p}).call(this)}).call(this,e("_process"))},{"../adapters/http":18,"../adapters/xhr":18,"../core/AxiosError":24,"../helpers/normalizeHeaderName":41,"../helpers/toFormData":46,"../utils":48,"./env/FormData":42,"./transitional":32,_process:53}],32:[function(e,t,r){"use strict";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},{}],33:[function(e,t,r){t.exports={version:"0.27.2"}},{}],34:[function(e,t,r){"use strict";t.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},{}],35:[function(e,t,r){"use strict";var n=e("./../utils");function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(n.isURLSearchParams(t))s=t.toString();else{var i=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),i.push(o(t)+"="+o(e))})))})),s=i.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},{"./../utils":48}],36:[function(e,t,r){"use strict";t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],37:[function(e,t,r){"use strict";var n=e("./../utils");t.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,s,i){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(s)&&a.push("domain="+s),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},{"./../utils":48}],38:[function(e,t,r){"use strict";t.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},{}],39:[function(e,t,r){"use strict";var n=e("./../utils");t.exports=function(e){return n.isObject(e)&&!0===e.isAxiosError}},{"./../utils":48}],40:[function(e,t,r){"use strict";var n=e("./../utils");t.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},{"./../utils":48}],41:[function(e,t,r){"use strict";var n=e("../utils");t.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},{"../utils":48}],42:[function(e,t,r){t.exports=null},{}],43:[function(e,t,r){"use strict";var n=e("./../utils"),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(e){var t,r,s,i={};return e?(n.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=n.trim(e.substr(0,s)).toLowerCase(),r=n.trim(e.substr(s+1)),t){if(i[t]&&o.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}})),i):i}},{"./../utils":48}],44:[function(e,t,r){"use strict";t.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},{}],45:[function(e,t,r){"use strict";t.exports=function(e){return function(t){return e.apply(null,t)}}},{}],46:[function(e,t,r){(function(r){(function(){"use strict";var n=e("../utils");t.exports=function(e,t){t=t||new FormData;var o=[];function s(e){return null===e?"":n.isDate(e)?e.toISOString():n.isArrayBuffer(e)||n.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):r.from(e):e}return function e(r,i){if(n.isPlainObject(r)||n.isArray(r)){if(-1!==o.indexOf(r))throw Error("Circular reference detected in "+i);o.push(r),n.forEach(r,(function(r,o){if(!n.isUndefined(r)){var a,u=i?i+"."+o:o;if(r&&!i&&"object"==typeof r)if(n.endsWith(o,"{}"))r=JSON.stringify(r);else if(n.endsWith(o,"[]")&&(a=n.toArray(r)))return void a.forEach((function(e){!n.isUndefined(e)&&t.append(u,s(e))}));e(r,u)}})),o.pop()}else t.append(i,s(r))}(e),t}}).call(this)}).call(this,e("buffer").Buffer)},{"../utils":48,buffer:50}],47:[function(e,t,r){"use strict";var n=e("../env/data").version,o=e("../core/AxiosError"),s={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){s[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var i={};s.transitional=function(e,t,r){function s(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,n,a){if(!1===e)throw new o(s(n," has been removed"+(t?" in "+t:"")),o.ERR_DEPRECATED);return t&&!i[n]&&(i[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,a)}},t.exports={assertOptions:function(e,t,r){if("object"!=typeof e)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),s=n.length;s-- >0;){var i=n[s],a=t[i];if(a){var u=e[i],c=void 0===u||a(u,i,e);if(!0!==c)throw new o("option "+i+" must be "+c,o.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new o("Unknown option "+i,o.ERR_BAD_OPTION)}},validators:s}},{"../core/AxiosError":24,"../env/data":33}],48:[function(e,t,r){"use strict";var n,o=e("./helpers/bind"),s=Object.prototype.toString,i=(n=Object.create(null),function(e){var t=s.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return i(t)===e}}function u(e){return Array.isArray(e)}function c(e){return void 0===e}var l=a("ArrayBuffer");function p(e){return null!==e&&"object"==typeof e}function f(e){if("object"!==i(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var h=a("Date"),d=a("File"),y=a("Blob"),v=a("FileList");function m(e){return"[object Function]"===s.call(e)}var g=a("URLSearchParams");function x(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),u(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var w,b=(w="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return w&&e instanceof w});t.exports={isArray:u,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||s.call(e)===t||m(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:p,isPlainObject:f,isUndefined:c,isDate:h,isFile:d,isBlob:y,isFunction:m,isStream:function(e){return p(e)&&m(e.pipe)},isURLSearchParams:g,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:x,merge:function e(){var t={};function r(r,n){f(t[n])&&f(r)?t[n]=e(t[n],r):f(r)?t[n]=e({},r):u(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)x(arguments[n],r);return t},extend:function(e,t,r){return x(t,(function(t,n){e[n]=r&&"function"==typeof t?o(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,r,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)},toFlatObject:function(e,t,r){var n,o,s,i={};t=t||{};do{for(o=(n=Object.getOwnPropertyNames(e)).length;o-- >0;)i[s=n[o]]||(t[s]=e[s],i[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:i,kindOfTest:a,endsWith:function(e,t,r){e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;var n=e.indexOf(t,r);return-1!==n&&n===r},toArray:function(e){if(!e)return null;var t=e.length;if(c(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r},isTypedArray:b,isFileList:v}},{"./helpers/bind":34}],49:[function(e,t,r){"use strict";r.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},r.toByteArray=function(e){var t,r,n=c(e),i=n[0],a=n[1],u=new s(function(e,t,r){return 3*(t+r)/4-r}(0,i,a)),l=0,p=a>0?i-4:i;for(r=0;r<p;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},r.fromByteArray=function(e){for(var t,r=e.length,o=r%3,s=[],i=16383,a=0,u=r-o;a<u;a+=i)s.push(l(e,a,a+i>u?u:a+i));1===o?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return s.join("")};for(var n=[],o=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=i.length;a<u;++a)n[a]=i[a],o[i.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var o,s,i=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(n[(s=o)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],50:[function(e,t,r){(function(t){(function(){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var t=e("base64-js"),n=e("ieee754");r.Buffer=i,r.SlowBuffer=function(e){+e!=e&&(e=0);return i.alloc(+e)},r.INSPECT_MAX_BYTES=50;var o=2147483647;function s(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=i.prototype,t}function i(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return a(e,t,r)}function a(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!i.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|f(e,t),n=s(r),o=n.write(e,t);o!==r&&(n=n.slice(0,o));return n}(e,t);if(ArrayBuffer.isView(e))return l(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(N(e,ArrayBuffer)||e&&N(e.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return n.__proto__=i.prototype,n}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return i.from(n,t,r);var o=function(e){if(i.isBuffer(e)){var t=0|p(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||F(e.length)?s(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),s(e<0?0:0|p(e))}function l(e){for(var t=e.length<0?0:0|p(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function f(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||N(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return D(e).length;default:if(o)return n?-1:j(e).length;t=(""+t).toLowerCase(),o=!0}}function h(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return _(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function d(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),F(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,o){var s,i=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,a/=2,u/=2,r/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var l=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*i}else-1!==l&&(s-=s-l),l=-1}else for(r+u>a&&(r=a-u),s=r;s>=0;s--){for(var p=!0,f=0;f<u;f++)if(c(e,s+f)!==c(t,f)){p=!1;break}if(p)return s}return-1}function m(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var s=t.length;n>s/2&&(n=s/2);for(var i=0;i<n;++i){var a=parseInt(t.substr(2*i,2),16);if(F(a))return i;e[r+i]=a}return i}function g(e,t,r,n){return W(j(t,e.length-r),e,r,n)}function x(e,t,r,n){return W(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return x(e,t,r,n)}function b(e,t,r,n){return W(D(t),e,r,n)}function B(e,t,r,n){return W(function(e,t){for(var r,n,o,s=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o=r%256,s.push(o),s.push(n);return s}(t,e.length-r),e,r,n)}function E(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var s,i,a,u,c=e[o],l=null,p=c>239?4:c>223?3:c>191?2:1;if(o+p<=r)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(s=e[o+1]))&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:s=e[o+1],i=e[o+2],128==(192&s)&&128==(192&i)&&(u=(15&c)<<12|(63&s)<<6|63&i)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[o+1],i=e[o+2],a=e[o+3],128==(192&s)&&128==(192&i)&&128==(192&a)&&(u=(15&c)<<18|(63&s)<<12|(63&i)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,p=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=p}return function(e){var t=e.length;if(t<=U)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=U));return r}(n)}r.kMaxLength=o,i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(e,t,r){return a(e,t,r)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},i.allocUnsafe=function(e){return c(e)},i.allocUnsafeSlow=function(e){return c(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,t){if(N(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),N(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,s=Math.min(r,n);o<s;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=i.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(N(s,Uint8Array)&&(s=i.from(s)),!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},i.byteLength=f,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)d(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):h.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},i.prototype.compare=function(e,t,r,n,o){if(N(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),u=Math.min(s,a),c=this.slice(n,o),l=e.slice(t,r),p=0;p<u;++p)if(c[p]!==l[p]){s=c[p],a=l[p];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},i.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return m(this,e,t,r);case"utf8":case"utf-8":return g(this,e,t,r);case"ascii":return x(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return b(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;function O(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function _(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function R(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",s=t;s<r;++s)o+=A(e[s]);return o}function H(e,t,r){for(var n=e.slice(t,r),o="",s=0;s<n.length;s+=2)o+=String.fromCharCode(n[s]+256*n[s+1]);return o}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,n,o,s){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n,o,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function T(e,t,r,o,s){return t=+t,r>>>=0,s||L(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function q(e,t,r,o,s){return t=+t,r>>>=0,s||L(e,0,r,8),n.write(e,t,r,o,52,8),r+8}i.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=i.prototype,n},i.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n},i.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},i.prototype.readUInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=t,o=1,s=this[e+--n];n>0&&(o*=256);)s+=this[e+--n]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*t)),s},i.prototype.readInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){e>>>=0,t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e>>>=0,t||C(e,4,this.length),n.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||C(e,4,this.length),n.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||C(e,8,this.length),n.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||C(e,8,this.length),n.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,s=0;for(this[t]=255&e;++s<r&&(o*=256);)this[t+s]=e/o&255;return t+r},i.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+r},i.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);P(this,e,t,r,o-1,-o)}var s=0,i=1,a=0;for(this[t]=255&e;++s<r&&(i*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);P(this,e,t,r,o-1,-o)}var s=r-1,i=1,a=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeFloatLE=function(e,t,r){return T(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return T(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return q(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return q(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var s=o-1;s>=0;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return o},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var o=e.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(e=o)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=i.isBuffer(e)?e:i.from(e,n),u=a.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=a[s%u]}return this};var k=/[^+/0-9A-Za-z-_]/g;function A(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){var r;t=t||1/0;for(var n=e.length,o=null,s=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function D(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function N(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function F(e){return e!=e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":49,buffer:50,ieee754:51}],51:[function(e,t,r){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
r.read=function(e,t,r,n,o){var s,i,a=8*o-n-1,u=(1<<a)-1,c=u>>1,l=-7,p=r?o-1:0,f=r?-1:1,h=e[t+p];for(p+=f,s=h&(1<<-l)-1,h>>=-l,l+=a;l>0;s=256*s+e[t+p],p+=f,l-=8);for(i=s&(1<<-l)-1,s>>=-l,l+=n;l>0;i=256*i+e[t+p],p+=f,l-=8);if(0===s)s=1-c;else{if(s===u)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,n),s-=c}return(h?-1:1)*i*Math.pow(2,s-n)},r.write=function(e,t,r,n,o,s){var i,a,u,c=8*s-o-1,l=(1<<c)-1,p=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-i))<1&&(i--,u*=2),(t+=i+p>=1?f/u:f*Math.pow(2,1-p))*u>=2&&(i++,u/=2),i+p>=l?(a=0,i=l):i+p>=1?(a=(t*u-1)*Math.pow(2,o),i+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),i=0));o>=8;e[r+h]=255&a,h+=d,a/=256,o-=8);for(i=i<<o|a,c+=o;c>0;e[r+h]=255&i,h+=d,i/=256,c-=8);e[r+h-d]|=128*y}},{}],52:[function(e,t,r){(function(e,n){(function(){!function(e,n){var o,s;"object"==typeof r&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(o=e.Base64,(s=n()).noConflict=function(){return e.Base64=o,s},e.Meteor&&(Base64=s),e.Base64=s)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:this,(function(){"use strict";var e,t="3.7.2",r="function"==typeof atob,o="function"==typeof btoa,s="function"==typeof n,i="function"==typeof TextDecoder?new TextDecoder:void 0,a="function"==typeof TextEncoder?new TextEncoder:void 0,u=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),c=(e={},u.forEach((function(t,r){return e[t]=r})),e),l=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,p=String.fromCharCode.bind(String),f="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e,t){return void 0===t&&(t=function(e){return e}),new Uint8Array(Array.prototype.slice.call(e,0).map(t))},h=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"}))},d=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},y=function(e){for(var t,r,n,o,s="",i=e.length%3,a=0;a<e.length;){if((r=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(o=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");s+=u[(t=r<<16|n<<8|o)>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}return i?s.slice(0,i-3)+"===".substring(i):s},v=o?function(e){return btoa(e)}:s?function(e){return n.from(e,"binary").toString("base64")}:y,m=s?function(e){return n.from(e).toString("base64")}:function(e){for(var t=[],r=0,n=e.length;r<n;r+=4096)t.push(p.apply(null,e.subarray(r,r+4096)));return v(t.join(""))},g=function(e,t){return void 0===t&&(t=!1),t?h(m(e)):m(e)},x=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?p(192|t>>>6)+p(128|63&t):p(224|t>>>12&15)+p(128|t>>>6&63)+p(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return p(240|t>>>18&7)+p(128|t>>>12&63)+p(128|t>>>6&63)+p(128|63&t)},w=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,b=function(e){return e.replace(w,x)},B=s?function(e){return n.from(e,"utf8").toString("base64")}:a?function(e){return m(a.encode(e))}:function(e){return v(b(e))},E=function(e,t){return void 0===t&&(t=!1),t?h(B(e)):B(e)},S=function(e){return E(e,!0)},U=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,O=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return p(55296+(t>>>10))+p(56320+(1023&t));case 3:return p((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return p((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},_=function(e){return e.replace(U,O)},R=function(e){if(e=e.replace(/\s+/g,""),!l.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));for(var t,r,n,o="",s=0;s<e.length;)t=c[e.charAt(s++)]<<18|c[e.charAt(s++)]<<12|(r=c[e.charAt(s++)])<<6|(n=c[e.charAt(s++)]),o+=64===r?p(t>>16&255):64===n?p(t>>16&255,t>>8&255):p(t>>16&255,t>>8&255,255&t);return o},H=r?function(e){return atob(d(e))}:s?function(e){return n.from(e,"base64").toString("binary")}:R,C=s?function(e){return f(n.from(e,"base64"))}:function(e){return f(H(e),(function(e){return e.charCodeAt(0)}))},P=function(e){return C(T(e))},L=s?function(e){return n.from(e,"base64").toString("utf8")}:i?function(e){return i.decode(C(e))}:function(e){return _(H(e))},T=function(e){return d(e.replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})))},q=function(e){return L(T(e))},k=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},A=function(){var e=function(e,t){return Object.defineProperty(String.prototype,e,k(t))};e("fromBase64",(function(){return q(this)})),e("toBase64",(function(e){return E(this,e)})),e("toBase64URI",(function(){return E(this,!0)})),e("toBase64URL",(function(){return E(this,!0)})),e("toUint8Array",(function(){return P(this)}))},j=function(){var e=function(e,t){return Object.defineProperty(Uint8Array.prototype,e,k(t))};e("toBase64",(function(e){return g(this,e)})),e("toBase64URI",(function(){return g(this,!0)})),e("toBase64URL",(function(){return g(this,!0)}))},D={version:t,VERSION:"3.7.2",atob:H,atobPolyfill:R,btoa:v,btoaPolyfill:y,fromBase64:q,toBase64:E,encode:E,encodeURI:S,encodeURL:S,utob:b,btou:_,decode:q,isValid:function(e){if("string"!=typeof e)return!1;var t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:g,toUint8Array:P,extendString:A,extendUint8Array:j,extendBuiltins:function(){A(),j()},Base64:{}};return Object.keys(D).forEach((function(e){return D.Base64[e]=D[e]})),D}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{buffer:50}],53:[function(e,t,r){var n,o,s=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var c,l=[],p=!1,f=-1;function h(){p&&c&&(p=!1,c.length?l=c.concat(l):f=-1,l.length&&d())}function d(){if(!p){var e=u(h);p=!0;for(var t=l.length;t;){for(c=l,l=[];++f<t;)c&&c[f].run();f=-1,t=l.length}c=null,p=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function v(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new y(e,t)),1!==l.length||p||u(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],54:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty;function o(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function s(e){try{return encodeURIComponent(e)}catch(e){return null}}r.stringify=function(e,t){t=t||"";var r,o,i=[];for(o in"string"!=typeof t&&(t="?"),e)if(n.call(e,o)){if((r=e[o])||null!=r&&!isNaN(r)||(r=""),o=s(o),r=s(r),null===o||null===r)continue;i.push(o+"="+r)}return i.length?t+i.join("&"):""},r.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,n={};t=r.exec(e);){var s=o(t[1]),i=o(t[2]);null===s||null===i||s in n||(n[s]=i)}return n}},{}],55:[function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,s=Object.create(o.prototype),i=new R(n||[]);return s._invoke=function(e,t,r){var n=p;return function(o,s){if(n===h)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw s;return C()}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=U(i,r);if(a){if(a===y)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=l(e,t,r);if("normal"===u.type){if(n=r.done?d:f,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p="suspendedStart",f="suspendedYield",h="executing",d="completed",y={};function v(){}function m(){}function g(){}var x={};u(x,s,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(H([])));b&&b!==r&&n.call(b,s)&&(x=b);var B=g.prototype=v.prototype=Object.create(x);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,s,i,a){var u=l(e[o],e,s);if("throw"!==u.type){var c=u.arg,p=c.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,i,a)}),(function(e){r("throw",e,i,a)})):t.resolve(p).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,a)}))}a(u.arg)}var o;this._invoke=function(e,n){function s(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(s,s):s()}}function U(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,U(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function H(e){if(e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:C}}function C(){return{value:t,done:!0}}return m.prototype=g,u(B,"constructor",g),u(g,"constructor",m),m.displayName=u(g,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,a,"GeneratorFunction")),e.prototype=Object.create(B),e},e.awrap=function(e){return{__await:e}},E(S.prototype),u(S.prototype,i,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new S(c(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(B),u(B,a,"Generator"),u(B,s,(function(){return this})),u(B,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=H,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}("object"==typeof t?t.exports:{});try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},{}],56:[function(e,t,r){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],57:[function(e,t,r){(function(r){(function(){"use strict";var n=e("requires-port"),o=e("querystringify"),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,l=/^[a-zA-Z]:/;function p(e){return(e||"").toString().replace(s,"")}var f=[["#","hash"],["?","query"],function(e,t){return y(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function d(e){var t,n=("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{}).location||{},o={},s=typeof(e=e||n);if("blob:"===e.protocol)o=new m(unescape(e.pathname),{});else if("string"===s)for(t in o=new m(e,{}),h)delete o[t];else if("object"===s){for(t in e)t in h||(o[t]=e[t]);void 0===o.slashes&&(o.slashes=a.test(e.href))}return o}function y(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function v(e,t){e=(e=p(e)).replace(i,""),t=t||{};var r,n=c.exec(e),o=n[1]?n[1].toLowerCase():"",s=!!n[2],a=!!n[3],u=0;return s?a?(r=n[2]+n[3]+n[4],u=n[2].length+n[3].length):(r=n[2]+n[4],u=n[2].length):a?(r=n[3]+n[4],u=n[3].length):r=n[4],"file:"===o?u>=2&&(r=r.slice(2)):y(o)?r=n[4]:o?s&&(r=r.slice(2)):u>=2&&y(t.protocol)&&(r=n[4]),{protocol:o,slashes:s||y(o),slashesCount:u,rest:r}}function m(e,t,r){if(e=(e=p(e)).replace(i,""),!(this instanceof m))return new m(e,t,r);var s,a,u,c,h,g,x=f.slice(),w=typeof t,b=this,B=0;for("object"!==w&&"string"!==w&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),s=!(a=v(e||"",t=d(t))).protocol&&!a.slashes,b.slashes=a.slashes||s&&t.slashes,b.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||l.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!y(b.protocol)))&&(x[3]=[/(.*)/,"pathname"]);B<x.length;B++)"function"!=typeof(c=x[B])?(u=c[0],g=c[1],u!=u?b[g]=e:"string"==typeof u?~(h="@"===u?e.lastIndexOf(u):e.indexOf(u))&&("number"==typeof c[2]?(b[g]=e.slice(0,h),e=e.slice(h+c[2])):(b[g]=e.slice(h),e=e.slice(0,h))):(h=u.exec(e))&&(b[g]=h[1],e=e.slice(0,h.index)),b[g]=b[g]||s&&c[3]&&t[g]||"",c[4]&&(b[g]=b[g].toLowerCase())):e=c(e,b);r&&(b.query=r(b.query)),s&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],s=!1,i=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),i++):i&&(0===n&&(s=!0),r.splice(n,1),i--);return s&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(b.pathname,t.pathname)),"/"!==b.pathname.charAt(0)&&y(b.protocol)&&(b.pathname="/"+b.pathname),n(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(h=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,h),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(h+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&y(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}m.prototype={set:function(e,t,r){var s=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),s[e]=t;break;case"port":s[e]=t,n(t,s.protocol)?t&&(s.host=s.hostname+":"+t):(s.host=s.hostname,s[e]="");break;case"hostname":s[e]=t,s.port&&(t+=":"+s.port),s.host=t;break;case"host":s[e]=t,u.test(t)?(t=t.split(":"),s.port=t.pop(),s.hostname=t.join(":")):(s.hostname=t,s.port="");break;case"protocol":s.protocol=t.toLowerCase(),s.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";s[e]=t.charAt(0)!==i?i+t:t}else s[e]=t;break;case"username":case"password":s[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(s.username=t.slice(0,a),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=t.slice(a+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(t))}for(var c=0;c<f.length;c++){var l=f[c];l[4]&&(s[l[1]]=s[l[1]].toLowerCase())}return s.auth=s.password?s.username+":"+s.password:s.username,s.origin="file:"!==s.protocol&&y(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString(),s},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,n=r.host,s=r.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var i=s+(r.protocol&&r.slashes||y(r.protocol)?"//":"");return r.username?(i+=r.username,r.password&&(i+=":"+r.password),i+="@"):r.password?(i+=":"+r.password,i+="@"):"file:"!==r.protocol&&y(r.protocol)&&!n&&"/"!==r.pathname&&(i+="@"),(":"===n[n.length-1]||u.test(r.hostname)&&!r.port)&&(n+=":"),i+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(i+=r.hash),i}},m.extractProtocol=v,m.location=d,m.trimLeft=p,m.qs=o,t.exports=m}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{querystringify:54,"requires-port":56}],58:[function(e,t,r){"use strict";e("regenerator-runtime/runtime"),beforeEach((function(){localStorage.clear()})),e("./test-common"),e("./test-browser-specific"),e("./test-parallel-uploads"),e("./test-terminate"),e("./test-end-to-end")},{"./test-browser-specific":61,"./test-common":62,"./test-end-to-end":63,"./test-parallel-uploads":64,"./test-terminate":65,"regenerator-runtime/runtime":55}],59:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,s=Object.create(o.prototype),i=new U(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return _()}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=B(i,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function h(){}function d(){}function y(){}var v={};c(v,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&r.call(g,i)&&(v=g);var x=y.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(s,i,a,u){var c=p(e[s],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,u)}))}u(c.arg)}var s;this._invoke=function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return s=s?s.then(n,n):n()}}function B(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,B(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return d.prototype=y,c(x,"constructor",y),c(y,"constructor",d),d.displayName=c(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new b(l(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(x),c(x,u,"Generator"),c(x,i,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,U.prototype={constructor:U,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function s(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function i(e){e.sort((function(e,t){return e.id-t.id}))}t.exports=function(){var e,t=(e=o().mark((function e(t){var r,n,s,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.findAllUploads();case 2:return r=e.sent,expect(r).toEqual([]),e.next=6,t.addUpload("fingerprintA",{id:1});case 6:return n=e.sent,e.next=9,t.addUpload("fingerprintA",{id:2});case 9:return s=e.sent,e.next=12,t.addUpload("fingerprintB",{id:3});case 12:return a=e.sent,expect(/^tus::fingerprintA::/.test(n)).toBe(!0),expect(/^tus::fingerprintA::/.test(s)).toBe(!0),expect(/^tus::fingerprintB::/.test(a)).toBe(!0),e.next=18,t.findUploadsByFingerprint("fingerprintA");case 18:return i(r=e.sent),expect(r).toEqual([{id:1,urlStorageKey:n},{id:2,urlStorageKey:s}]),e.next=23,t.findUploadsByFingerprint("fingerprintB");case 23:return i(r=e.sent),expect(r).toEqual([{id:3,urlStorageKey:a}]),e.next=28,t.findAllUploads();case 28:return i(r=e.sent),expect(r).toEqual([{id:1,urlStorageKey:n},{id:2,urlStorageKey:s},{id:3,urlStorageKey:a}]),e.next=33,t.removeUpload(s);case 33:return e.next=35,t.removeUpload(a);case 35:return e.next=37,t.findUploadsByFingerprint("fingerprintA");case 37:return r=e.sent,expect(r).toEqual([{id:1,urlStorageKey:n}]),e.next=41,t.findUploadsByFingerprint("fingerprintB");case 41:r=e.sent,expect(r).toEqual([]);case 43:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,u,"next",e)}function u(e){s(i,n,o,a,u,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()},{}],60:[function(e,t,r){(function(e){(function(){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=!("undefined"!=typeof window);function u(){var e,t;return[new Promise((function(r,n){e=r,t=n})),e,t]}var c=function(){function e(){r(this,e),this._pendingRequests=[],this._pendingWaits=[]}return o(e,[{key:"createRequest",value:function(e,t){var r=this;return new l(e,t,(function(e){r._pendingWaits.length>=1?r._pendingWaits.shift()(e):r._pendingRequests.push(e)}))}},{key:"nextRequest",value:function(){var e=this;return this._pendingRequests.length>=1?Promise.resolve(this._pendingRequests.shift()):new Promise((function(t){e._pendingWaits.push(t)}))}}]),e}(),l=function(){function e(t,n,o){r(this,e),this.method=t,this.url=n,this.requestHeaders={},this.body=null,this._onRequestSend=o,this._onProgress=function(){};var i=s(u(),3);this._requestPromise=i[0],this._resolveRequest=i[1],this._rejectRequest=i[2]}return o(e,[{key:"getMethod",value:function(){return this.method}},{key:"getURL",value:function(){return this.url}},{key:"setHeader",value:function(e,t){this.requestHeaders[e]=t}},{key:"getHeader",value:function(e){return this.requestHeaders[e]||null}},{key:"setProgressHandler",value:function(e){this._onProgress=e}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.body=e,e&&(this._onProgress(0),this._onProgress(e.length||e.size||0)),this._onRequestSend(this),this._requestPromise}},{key:"abort",value:function(){this._rejectRequest(new Error("request aborted"))}},{key:"getUnderlyingObject",value:function(){throw new Error("not implemented")}},{key:"respondWith",value:function(e){e.responseHeaders=e.responseHeaders||{};var t=new p(e);this._resolveRequest(t)}},{key:"responseError",value:function(e){this._rejectRequest(e)}}]),e}(),p=function(){function e(t){r(this,e),this._response=t}return o(e,[{key:"getStatus",value:function(){return this._response.status}},{key:"getHeader",value:function(e){return this._response.responseHeaders[e]}},{key:"getBody",value:function(){return this._response.responseText}},{key:"getUnderlyingObject",value:function(){throw new Error("not implemented")}}]),e}();t.exports={TestHttpStack:c,waitableFunction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"func",t=u(),r=s(t,2),n=r[0],o=r[1],i=jasmine.createSpy(e,o).and.callThrough();return i.toBeCalled=n,i},wait:function(e){return new Promise((function(t){return setTimeout(t,e,"timed out")}))},getBlob:function(t){return a?e.from(t):new Blob(t.split(""))}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:50}],61:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,s=Object.create(o.prototype),i=new U(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return _()}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=B(i,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function h(){}function d(){}function y(){}var v={};c(v,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&r.call(g,i)&&(v=g);var x=y.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(s,i,a,u){var c=p(e[s],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,u)}))}u(c.arg)}var s;this._invoke=function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return s=s?s.then(n,n):n()}}function B(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,B(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return d.prototype=y,c(x,"constructor",y),c(y,"constructor",d),d.displayName=c(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new b(l(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(x),c(x,u,"Generator"),c(x,i,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,U.prototype={constructor:U,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function s(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,u,"next",e)}function u(e){s(i,n,o,a,u,"throw",e)}a(void 0)}))}}var a=e("./helpers/assertUrlStorage"),u=e("./helpers/utils"),c=u.TestHttpStack,l=u.waitableFunction,p=u.wait,f=e("../..");describe("tus",(function(){beforeEach((function(){localStorage.clear()})),describe("#Upload",(function(){it("should resume an upload from a stored url",i(o().mark((function e(){var t,r,n,s,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("tus::fingerprinted::1337",JSON.stringify({uploadUrl:"http://tus.io/uploads/resuming"})),t=new c,r=new Blob("hello world".split("")),n={httpStack:t,endpoint:"http://tus.io/uploads",onProgress:function(){},fingerprint:function(){}},spyOn(n,"fingerprint").and.resolveTo("fingerprinted"),spyOn(n,"onProgress"),s=new f.Upload(r,n),e.next=9,s.findPreviousUploads();case 9:return i=e.sent,expect(i).toEqual([{uploadUrl:"http://tus.io/uploads/resuming",urlStorageKey:"tus::fingerprinted::1337"}]),s.resumeFromPreviousUpload(i[0]),s.start(),expect(n.fingerprint).toHaveBeenCalledWith(r,s.options),e.next=16,t.nextRequest();case 16:return a=e.sent,expect(a.url).toBe("http://tus.io/uploads/resuming"),expect(a.method).toBe("HEAD"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),a.respondWith({status:204,responseHeaders:{"Upload-Length":11,"Upload-Offset":3}}),e.next=23,t.nextRequest();case 23:a=e.sent,expect(a.url).toBe("http://tus.io/uploads/resuming"),expect(a.method).toBe("PATCH"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Offset"]).toBe(3),expect(a.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(a.body.size).toBe(8),a.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),expect(s.url).toBe("http://tus.io/uploads/resuming"),expect(n.onProgress).toHaveBeenCalledWith(11,11);case 33:case"end":return e.stop()}}),e)})))),describe("storing of upload urls",(function(){var e=new c,t={httpStack:e,endpoint:"http://tus.io/uploads",fingerprint:function(){}};function r(){return n.apply(this,arguments)}function n(){return(n=i(o().mark((function r(){var n,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=new Blob("hello world".split("")),spyOn(t,"fingerprint").and.resolveTo("fingerprinted"),t.onSuccess=l("onSuccess"),new f.Upload(n,t).start(),expect(t.fingerprint).toHaveBeenCalled(),r.next=8,e.nextRequest();case 8:return s=r.sent,expect(s.url).toBe("http://tus.io/uploads"),expect(s.method).toBe("POST"),s.respondWith({status:201,responseHeaders:{Location:"/uploads/blargh"}}),r.next=14,p(10);case 14:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function s(){return a.apply(this,arguments)}function a(){return(a=i(o().mark((function r(){var n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.nextRequest();case 2:return n=r.sent,expect(n.url).toBe("http://tus.io/uploads/blargh"),expect(n.method).toBe("PATCH"),n.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),r.next=8,t.onSuccess.toBeCalled;case 8:case"end":return r.stop()}}),r)})))).apply(this,arguments)}it("should store and retain with default options",i(o().mark((function e(){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.removeFingerprintOnSuccess=!1,e.next=3,r();case 3:return n=localStorage.key(0),expect(n.indexOf("tus::fingerprinted::")).toBe(0),i=JSON.parse(localStorage.getItem(n)),expect(i.uploadUrl).toBe("http://tus.io/uploads/blargh"),expect(i.size).toBe(11),e.next=10,s();case 10:expect(localStorage.getItem(n)).toBe(JSON.stringify(i));case 11:case"end":return e.stop()}}),e)})))),it("should store and remove with option removeFingerprintOnSuccess set",i(o().mark((function e(){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.removeFingerprintOnSuccess=!0,e.next=3,r();case 3:return n=localStorage.key(0),expect(n.indexOf("tus::fingerprinted::")).toBe(0),i=JSON.parse(localStorage.getItem(n)),expect(i.uploadUrl).toBe("http://tus.io/uploads/blargh"),expect(i.size).toBe(11),e.next=10,s();case 10:expect(localStorage.getItem(n)).toBe(null);case 11:case"end":return e.stop()}}),e)})))),it("should store URLs passed in using the uploadUrl option",i(o().mark((function t(){var r,n,s,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Blob("hello world".split("")),n={httpStack:e,uploadUrl:"http://tus.io/uploads/storedUrl",fingerprint:function(){},onSuccess:l("onSuccess"),removeFingerprintOnSuccess:!0},spyOn(n,"fingerprint").and.resolveTo("fingerprinted"),new f.Upload(r,n).start(),expect(n.fingerprint).toHaveBeenCalled(),t.next=8,e.nextRequest();case 8:return s=t.sent,expect(s.url).toBe("http://tus.io/uploads/storedUrl"),expect(s.method).toBe("HEAD"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),s.respondWith({status:204,responseHeaders:{"Upload-Length":11,"Upload-Offset":3}}),t.next=15,p(10);case 15:return i=localStorage.key(0),expect(i.indexOf("tus::fingerprinted::")).toBe(0),a=JSON.parse(localStorage.getItem(i)),expect(a.uploadUrl).toBe("http://tus.io/uploads/storedUrl"),expect(a.size).toBe(11),t.next=22,e.nextRequest();case 22:return s=t.sent,expect(s.url).toBe("http://tus.io/uploads/storedUrl"),expect(s.method).toBe("PATCH"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(s.requestHeaders["Upload-Offset"]).toBe(3),expect(s.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(s.body.size).toBe(8),s.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),t.next=32,n.onSuccess.toBeCalled;case 32:expect(localStorage.getItem(i)).toBe(null);case 33:case"end":return t.stop()}}),t)}))))})),it("should delete upload urls on a 4XX",i(o().mark((function e(){var t,r,n,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new c,r=new Blob("hello world".split("")),n={httpStack:t,endpoint:"http://tus.io/uploads",fingerprint:function(){}},spyOn(n,"fingerprint").and.resolveTo("fingerprinted"),(s=new f.Upload(r,n)).resumeFromPreviousUpload({uploadUrl:"http://tus.io/uploads/resuming",urlStorageKey:"tus::fingerprinted::1337"}),s.start(),e.next=9,t.nextRequest();case 9:return i=e.sent,expect(i.url).toBe("http://tus.io/uploads/resuming"),expect(i.method).toBe("HEAD"),i.respondWith({status:400}),e.next=15,p(10);case 15:expect(localStorage.getItem("tus::fingerprinted::1337")).toBe(null);case 16:case"end":return e.stop()}}),e)})))),describe("uploading data from a Reader",(function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,r={value:e.split(""),read:function(){var e,r=!1;return this.value.length>0?(e=this.value.slice(0,t),this.value=this.value.slice(t)):r=!0,Promise.resolve({value:e,done:r})},cancel:l("cancel")};return r}function t(e){return r.apply(this,arguments)}function r(){return(r=i(o().mark((function t(r){var n,s,i,a,u,p,h;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.readSize,s=r.chunkSize,i=e("hello world",n),a=new c,u={httpStack:a,endpoint:"http://tus.io/uploads",chunkSize:s,onProgress:l("onProgress"),onSuccess:l("onSuccess"),fingerprint:function(){},uploadLengthDeferred:!0},spyOn(u,"fingerprint").and.resolveTo("fingerprinted"),(p=new f.Upload(i,u)).start(),expect(u.fingerprint).toHaveBeenCalledWith(i,p.options),t.next=10,a.nextRequest();case 10:return h=t.sent,expect(h.url).toBe("http://tus.io/uploads"),expect(h.method).toBe("POST"),expect(h.requestHeaders["Upload-Length"]).toBe(void 0),expect(h.requestHeaders["Upload-Defer-Length"]).toBe(1),h.respondWith({status:201,responseHeaders:{Location:"http://tus.io/uploads/blargh"}}),t.next=18,a.nextRequest();case 18:return h=t.sent,expect(h.url).toBe("http://tus.io/uploads/blargh"),expect(h.method).toBe("PATCH"),expect(h.requestHeaders["Upload-Offset"]).toBe(0),expect(h.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(h.body.length).toBe(11),h.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),t.next=27,u.onProgress.toBeCalled;case 27:return expect(u.onProgress).toHaveBeenCalledWith(11,null),t.next=30,a.nextRequest();case 30:return h=t.sent,expect(h.url).toBe("http://tus.io/uploads/blargh"),expect(h.method).toBe("PATCH"),expect(h.requestHeaders["Upload-Offset"]).toBe(11),expect(h.requestHeaders["Upload-Length"]).toBe(11),expect(h.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(h.body).toBe(null),h.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),t.next=40,u.onSuccess.toBeCalled;case 40:expect(p.url).toBe("http://tus.io/uploads/blargh"),expect(u.onProgress).toHaveBeenCalledWith(11,11);case 42:case"end":return t.stop()}}),t)})))).apply(this,arguments)}it("should upload data",i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({chunkSize:100,readSize:100});case 2:case"end":return e.stop()}}),e)})))),it("should read multiple times from the reader",i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({chunkSize:100,readSize:6});case 2:case"end":return e.stop()}}),e)})))),it("should use multiple PATCH requests",i(o().mark((function t(){var r,n,s,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e("hello world",1),n=new c,s={httpStack:n,endpoint:"http://tus.io/uploads",chunkSize:6,onProgress:l("onProgress"),onSuccess:l("onSuccess"),fingerprint:function(){},uploadLengthDeferred:!0},spyOn(s,"fingerprint").and.resolveTo("fingerprinted"),(i=new f.Upload(r,s)).start(),expect(s.fingerprint).toHaveBeenCalledWith(r,i.options),t.next=9,n.nextRequest();case 9:return a=t.sent,expect(a.url).toBe("http://tus.io/uploads"),expect(a.method).toBe("POST"),expect(a.requestHeaders["Upload-Length"]).toBe(void 0),expect(a.requestHeaders["Upload-Defer-Length"]).toBe(1),a.respondWith({status:201,responseHeaders:{Location:"http://tus.io/uploads/blargh"}}),t.next=17,n.nextRequest();case 17:return a=t.sent,expect(a.url).toBe("http://tus.io/uploads/blargh"),expect(a.method).toBe("PATCH"),expect(a.requestHeaders["Upload-Offset"]).toBe(0),expect(a.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(a.body.length).toBe(6),a.respondWith({status:204,responseHeaders:{"Upload-Offset":6}}),t.next=26,s.onProgress.toBeCalled;case 26:return expect(s.onProgress).toHaveBeenCalledWith(6,null),t.next=29,n.nextRequest();case 29:return a=t.sent,expect(a.url).toBe("http://tus.io/uploads/blargh"),expect(a.method).toBe("PATCH"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Offset"]).toBe(6),expect(a.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(a.body.length).toBe(5),a.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),t.next=39,n.nextRequest();case 39:return a=t.sent,expect(a.url).toBe("http://tus.io/uploads/blargh"),expect(a.method).toBe("PATCH"),expect(a.requestHeaders["Upload-Offset"]).toBe(11),expect(a.requestHeaders["Upload-Length"]).toBe(11),expect(a.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(a.body).toBe(null),a.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),t.next=49,s.onSuccess.toBeCalled;case 49:expect(i.url).toBe("http://tus.io/uploads/blargh"),expect(s.onProgress).toHaveBeenCalledWith(11,11);case 51:case"end":return t.stop()}}),t)})))),it("should retry the POST request",i(o().mark((function t(){var r,n,s,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e("hello world",1),n=new c,s={httpStack:n,endpoint:"http://tus.io/files/",chunkSize:11,retryDelays:[10,10,10],onSuccess:l("onSuccess"),uploadLengthDeferred:!0},new f.Upload(r,s).start(),t.next=7,n.nextRequest();case 7:return i=t.sent,expect(i.url).toBe("http://tus.io/files/"),expect(i.method).toBe("POST"),i.respondWith({status:500}),t.next=13,n.nextRequest();case 13:return i=t.sent,expect(i.url).toBe("http://tus.io/files/"),expect(i.method).toBe("POST"),i.respondWith({status:201,responseHeaders:{Location:"/files/foo"}}),t.next=19,n.nextRequest();case 19:return i=t.sent,expect(i.url).toBe("http://tus.io/files/foo"),expect(i.method).toBe("PATCH"),i.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),t.next=25,n.nextRequest();case 25:return i=t.sent,expect(i.url).toBe("http://tus.io/files/foo"),expect(i.method).toBe("PATCH"),expect(i.requestHeaders["Upload-Length"]).toBe(11),i.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),t.next=32,s.onSuccess.toBeCalled;case 32:case"end":return t.stop()}}),t)})))),it("should retry the first PATCH request",i(o().mark((function t(){var r,n,s,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e("hello world",1),n=new c,s={httpStack:n,endpoint:"http://tus.io/files/",chunkSize:11,retryDelays:[10,10,10],onSuccess:l("onSuccess"),uploadLengthDeferred:!0},new f.Upload(r,s).start(),t.next=7,n.nextRequest();case 7:return i=t.sent,expect(i.url).toBe("http://tus.io/files/"),expect(i.method).toBe("POST"),i.respondWith({status:201,responseHeaders:{Location:"/files/foo"}}),t.next=13,n.nextRequest();case 13:return i=t.sent,expect(i.url).toBe("http://tus.io/files/foo"),expect(i.method).toBe("PATCH"),i.respondWith({status:500}),t.next=19,n.nextRequest();case 19:return i=t.sent,expect(i.url).toBe("http://tus.io/files/foo"),expect(i.method).toBe("HEAD"),i.respondWith({status:204,responseHeaders:{"Upload-Offset":0}}),t.next=25,n.nextRequest();case 25:return i=t.sent,expect(i.url).toBe("http://tus.io/files/foo"),expect(i.method).toBe("PATCH"),i.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),t.next=31,n.nextRequest();case 31:return i=t.sent,expect(i.url).toBe("http://tus.io/files/foo"),expect(i.method).toBe("PATCH"),expect(i.requestHeaders["Upload-Length"]).toBe(11),i.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),t.next=38,s.onSuccess.toBeCalled;case 38:case"end":return t.stop()}}),t)})))),it("should retry following PATCH requests",i(o().mark((function t(){var r,n,s,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e("hello world there!"),n=new c,s={httpStack:n,endpoint:"http://tus.io/files/",chunkSize:6,retryDelays:[10,10,10],onSuccess:function(){},uploadLengthDeferred:!0},new f.Upload(r,s).start(),t.next=7,n.nextRequest();case 7:return i=t.sent,expect(i.url).toBe("http://tus.io/files/"),expect(i.method).toBe("POST"),i.respondWith({status:201,responseHeaders:{Location:"/files/foo"}}),t.next=13,n.nextRequest();case 13:return i=t.sent,expect(i.url).toBe("http://tus.io/files/foo"),expect(i.method).toBe("PATCH"),i.respondWith({status:204,responseHeaders:{"Upload-Offset":6}}),t.next=19,n.nextRequest();case 19:return i=t.sent,expect(i.url).toBe("http://tus.io/files/foo"),expect(i.method).toBe("PATCH"),i.respondWith({status:500}),t.next=25,n.nextRequest();case 25:return i=t.sent,expect(i.url).toBe("http://tus.io/files/foo"),expect(i.method).toBe("HEAD"),i.respondWith({status:204,responseHeaders:{"Upload-Offset":6}}),t.next=31,n.nextRequest();case 31:return i=t.sent,expect(i.url).toBe("http://tus.io/files/foo"),expect(i.method).toBe("PATCH"),i.respondWith({status:204,responseHeaders:{"Upload-Offset":12}}),t.next=37,n.nextRequest();case 37:return i=t.sent,expect(i.url).toBe("http://tus.io/files/foo"),expect(i.method).toBe("PATCH"),i.respondWith({status:204,responseHeaders:{"Upload-Offset":18}}),t.next=43,n.nextRequest();case 43:return i=t.sent,expect(i.url).toBe("http://tus.io/files/foo"),expect(i.method).toBe("PATCH"),expect(i.requestHeaders["Upload-Length"]).toBe(18),i.respondWith({status:204,responseHeaders:{"Upload-Offset":18}}),t.next=50,s.onSuccess.toBeCalled;case 50:case"end":return t.stop()}}),t)}))))})),describe("resolving of URIs",(function(){if(navigator.userAgent.indexOf("Trident/")>0)console.log("Skipping tests for React Native in Internet Explorer");else{var e=navigator.product;beforeEach((function(){jasmine.Ajax.install(),Object.defineProperty(navigator,"product",{value:"ReactNative",configurable:!0})})),afterEach((function(){jasmine.Ajax.uninstall(),Object.defineProperty(navigator,"product",{value:e,configurable:!0})})),it("should upload a file from an URI",i(o().mark((function e(){var t,r,n,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={uri:"file:///my/file.dat"},r=new c,n={httpStack:r,endpoint:"http://tus.io/uploads",onSuccess:l("onSuccess")},(s=new f.Upload(t,n)).start(),e.next=7,p(0);case 7:return i=jasmine.Ajax.requests.mostRecent(),expect(i.url).toBe("file:///my/file.dat"),expect(i.method).toBe("GET"),expect(i.responseType).toBe("blob"),i.respondWith({status:200,responseHeaders:{"Upload-Length":11,"Upload-Offset":3},response:new Blob("hello world".split(""))}),e.next=14,r.nextRequest();case 14:return i=e.sent,expect(i.url).toBe("http://tus.io/uploads"),expect(i.method).toBe("POST"),expect(i.requestHeaders["Upload-Length"]).toBe(11),i.respondWith({status:201,responseHeaders:{Location:"/uploads/blargh"}}),e.next=21,r.nextRequest();case 21:return i=e.sent,expect(i.url).toBe("http://tus.io/uploads/blargh"),expect(i.method).toBe("PATCH"),expect(i.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(i.requestHeaders["Upload-Offset"]).toBe(0),expect(i.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(i.body.size).toBe(11),i.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),e.next=31,n.onSuccess.toBeCalled;case 31:expect(s.url).toBe("http://tus.io/uploads/blargh");case 32:case"end":return e.stop()}}),e)})))),it("should emit an error if it can't resolve the URI",i(o().mark((function e(){var t,r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={uri:"file:///my/file.dat"},r={endpoint:"http://tus.io/uploads",onError:l("onError")},new f.Upload(t,r).start(),e.next=6,p(0);case 6:return n=jasmine.Ajax.requests.mostRecent(),expect(n.url).toBe("file:///my/file.dat"),expect(n.method).toBe("GET"),expect(n.responseType).toBe("blob"),n.responseError(),e.next=13,r.onError.toBeCalled;case 13:expect(r.onError).toHaveBeenCalledWith(new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. [object Object]"));case 14:case"end":return e.stop()}}),e)}))))}}))})),describe("#LocalStorageUrlStorage",(function(){it("should allow storing and retrieving uploads",i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(f.defaultOptions.urlStorage);case 2:case"end":return e.stop()}}),e)}))))}))}))},{"../..":4,"./helpers/assertUrlStorage":59,"./helpers/utils":60}],62:[function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",u=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,s=Object.create(o.prototype),i=new U(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return _()}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=B(i,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function h(){}function d(){}function y(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&r.call(g,o)&&(v=g);var x=y.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,u){var c=p(e[o],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==s(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var o;this._invoke=function(e,r){function s(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(s,s):s()}}function B(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,B(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:_}}function _(){return{value:void 0,done:!0}}return d.prototype=y,c(x,"constructor",y),c(y,"constructor",d),d.displayName=c(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new b(l(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(x),c(x,u,"Generator"),c(x,o,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,U.prototype={constructor:U,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function a(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){a(s,n,o,i,u,"next",e)}function u(e){a(s,n,o,i,u,"throw",e)}i(void 0)}))}}var c=e("./helpers/utils"),l=c.TestHttpStack,p=c.waitableFunction,f=c.wait,h=c.getBlob,d=e("../..");describe("tus",(function(){describe("#isSupported",(function(){it("should be true",(function(){expect(d.isSupported).toBe(!0)}))})),describe("#Upload",(function(){it("should throw if no error handler is available",(function(){var e=new d.Upload(null);expect(e.start.bind(e)).toThrowError("tus: no file or stream to upload provided")})),it("should throw if no endpoint and upload URL is provided",(function(){var e=h("hello world"),t=new d.Upload(e);expect(t.start.bind(t)).toThrowError("tus: neither an endpoint or an upload URL is provided")})),it("should upload a file",u(i().mark((function e(){var t,r,n,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"https://tus.io/uploads",headers:{Custom:"blargh"},metadata:{foo:"hello",bar:"world",nonlatin:"soce",number:100},withCredentials:!0,onProgress:function(){},onSuccess:p()},spyOn(n,"onProgress"),(o=new d.Upload(r,n)).start(),e.next=8,t.nextRequest();case 8:return s=e.sent,expect(s.url).toBe("https://tus.io/uploads"),expect(s.method).toBe("POST"),expect(s.requestHeaders.Custom).toBe("blargh"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(s.requestHeaders["Upload-Length"]).toBe(11),expect(s.requestHeaders["Upload-Metadata"]).toBe("foo aGVsbG8=,bar d29ybGQ=,nonlatin c8WCb8WEY2U=,number MTAw"),s.respondWith({status:201,responseHeaders:{Location:"https://tus.io/uploads/blargh"}}),e.next=18,t.nextRequest();case 18:return s=e.sent,expect(s.url).toBe("https://tus.io/uploads/blargh"),expect(s.method).toBe("PATCH"),expect(s.requestHeaders.Custom).toBe("blargh"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(s.requestHeaders["Upload-Offset"]).toBe(0),expect(s.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(s.body.size).toBe(11),s.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),e.next=29,n.onSuccess.toBeCalled;case 29:expect(o.url).toBe("https://tus.io/uploads/blargh"),expect(n.onProgress).toHaveBeenCalledWith(11,11);case 31:case"end":return e.stop()}}),e)})))),it("should create an upload if resuming fails",u(i().mark((function e(){var t,r,n,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/uploads",uploadUrl:"http://tus.io/uploads/resuming"},(o=new d.Upload(r,n)).start(),e.next=7,t.nextRequest();case 7:return s=e.sent,expect(s.url).toBe("http://tus.io/uploads/resuming"),expect(s.method).toBe("HEAD"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),s.respondWith({status:404}),e.next=14,t.nextRequest();case 14:s=e.sent,expect(s.url).toBe("http://tus.io/uploads"),expect(s.method).toBe("POST"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(s.requestHeaders["Upload-Length"]).toBe(11),expect(o.url).toBe(null);case 20:case"end":return e.stop()}}),e)})))),it("should create an upload using the creation-with-data extension",u(i().mark((function e(){var t,r,n,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/uploads",uploadDataDuringCreation:!0,onProgress:function(){},onChunkComplete:function(){},onSuccess:p("onSuccess")},spyOn(n,"onProgress"),spyOn(n,"onChunkComplete"),(o=new d.Upload(r,n)).start(),e.next=9,t.nextRequest();case 9:return s=e.sent,expect(s.url).toBe("http://tus.io/uploads"),expect(s.method).toBe("POST"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(s.requestHeaders["Upload-Length"]).toBe(11),expect(s.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(s.body.size).toBe(11),s.respondWith({status:201,responseHeaders:{Location:"http://tus.io/uploads/blargh","Upload-Offset":11}}),e.next=19,n.onSuccess.toBeCalled;case 19:expect(n.onProgress).toHaveBeenCalledWith(11,11),expect(n.onChunkComplete).toHaveBeenCalledWith(11,11,11),expect(n.onSuccess).toHaveBeenCalled(),expect(o.url).toBe("http://tus.io/uploads/blargh");case 23:case"end":return e.stop()}}),e)})))),it("should create an upload with partial data and continue",u(i().mark((function e(){var t,r,n,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/uploads",uploadDataDuringCreation:!0,chunkSize:6,onProgress:function(){},onChunkComplete:function(){},onSuccess:p("onSuccess")},spyOn(n,"onProgress"),spyOn(n,"onChunkComplete"),(o=new d.Upload(r,n)).start(),e.next=9,t.nextRequest();case 9:return s=e.sent,expect(s.url).toBe("http://tus.io/uploads"),expect(s.method).toBe("POST"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(s.requestHeaders["Upload-Length"]).toBe(11),expect(s.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(s.body.size).toBe(6),s.respondWith({status:201,responseHeaders:{Location:"http://tus.io/uploads/blargh","Upload-Offset":6}}),e.next=19,t.nextRequest();case 19:return s=e.sent,expect(n.onProgress).toHaveBeenCalledWith(6,11),expect(n.onChunkComplete).toHaveBeenCalledWith(6,6,11),expect(n.onSuccess).not.toHaveBeenCalled(),expect(o.url).toBe("http://tus.io/uploads/blargh"),expect(s.url).toBe("http://tus.io/uploads/blargh"),expect(s.method).toBe("PATCH"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(s.requestHeaders["Upload-Offset"]).toBe(6),expect(s.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(s.body.size).toBe(5),s.respondWith({status:201,responseHeaders:{Location:"http://tus.io/uploads/blargh","Upload-Offset":11}}),e.next=33,n.onSuccess.toBeCalled;case 33:expect(n.onProgress).toHaveBeenCalledWith(11,11),expect(n.onChunkComplete).toHaveBeenCalledWith(5,11,11),expect(n.onSuccess).toHaveBeenCalled();case 36:case"end":return e.stop()}}),e)})))),it("should add the request's body and ID to errors",u(i().mark((function e(){var t,r,n,o,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/uploads",addRequestId:!0,retryDelays:null,onError:p("onError")},new d.Upload(r,n).start(),e.next=7,t.nextRequest();case 7:return o=e.sent,expect(o.url).toBe("http://tus.io/uploads"),expect(o.method).toBe("POST"),a=o.requestHeaders["X-Request-ID"],expect(s(a)).toBe("string"),expect(a.length).toBe(36),o.respondWith({status:500,responseText:"server_error"}),e.next=16,n.onError.toBeCalled;case 16:u=e.sent,expect(u.message).toBe("tus: unexpected response while creating upload, originated from request (method: POST, url: http://tus.io/uploads, response code: 500, response text: server_error, request id: ".concat(a,")")),expect(u.originalRequest).toBeDefined(),expect(u.originalResponse).toBeDefined();case 20:case"end":return e.stop()}}),e)})))),it("should invoke the request and response callbacks",u(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,uploadUrl:"http://tus.io/uploads/foo",onBeforeRequest:function(e){expect(e.getURL()).toBe("http://tus.io/uploads/foo"),expect(e.getMethod()).toBe("HEAD")},onAfterResponse:function(e,t){expect(e.getURL()).toBe("http://tus.io/uploads/foo"),expect(e.getMethod()).toBe("HEAD"),expect(t.getStatus()).toBe(204),expect(t.getHeader("Upload-Offset")).toBe(11)},onSuccess:p("onSuccess")},spyOn(n,"onBeforeRequest"),spyOn(n,"onAfterResponse"),new d.Upload(r,n).start(),e.next=9,t.nextRequest();case 9:return o=e.sent,expect(o.url).toBe("http://tus.io/uploads/foo"),expect(o.method).toBe("HEAD"),o.respondWith({status:204,responseHeaders:{"Upload-Offset":11,"Upload-Length":11}}),e.next=15,n.onSuccess.toBeCalled;case 15:expect(n.onBeforeRequest).toHaveBeenCalled(),expect(n.onAfterResponse).toHaveBeenCalled();case 17:case"end":return e.stop()}}),e)})))),it("should throw an error if resuming fails and no endpoint is provided",u(i().mark((function e(){var t,r,n,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,uploadUrl:"http://tus.io/uploads/resuming",onError:p("onError")},new d.Upload(r,n).start(),e.next=7,t.nextRequest();case 7:return o=e.sent,expect(o.url).toBe("http://tus.io/uploads/resuming"),expect(o.method).toBe("HEAD"),expect(o.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),o.respondWith({status:404}),e.next=14,n.onError.toBeCalled;case 14:s=e.sent,expect(s.message).toBe("tus: unable to resume upload (new upload cannot be created without an endpoint), originated from request (method: HEAD, url: http://tus.io/uploads/resuming, response code: 404, response text: , request id: n/a)");case 16:case"end":return e.stop()}}),e)})))),it("should resolve relative URLs",u(i().mark((function e(){var t,r,n,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io:1080/files/"},(o=new d.Upload(r,n)).start(),e.next=7,t.nextRequest();case 7:return s=e.sent,expect(s.url).toBe("http://tus.io:1080/files/"),expect(s.method).toBe("POST"),s.respondWith({status:201,responseHeaders:{Location:"//localhost/uploads/foo"}}),e.next=13,t.nextRequest();case 13:s=e.sent,expect(s.url).toBe("http://localhost/uploads/foo"),expect(s.method).toBe("PATCH"),s.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),expect(o.url).toBe("http://localhost/uploads/foo");case 18:case"end":return e.stop()}}),e)})))),it("should upload a file in chunks",u(i().mark((function e(){var t,r,n,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/uploads",chunkSize:7,onSuccess:p("onSuccess"),onProgress:function(){},onChunkComplete:function(){}},spyOn(n,"onProgress"),spyOn(n,"onChunkComplete"),(o=new d.Upload(r,n)).start(),e.next=9,t.nextRequest();case 9:return s=e.sent,expect(s.url).toBe("http://tus.io/uploads"),expect(s.method).toBe("POST"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(s.requestHeaders["Upload-Length"]).toBe(11),s.respondWith({status:201,responseHeaders:{Location:"/uploads/blargh"}}),e.next=17,t.nextRequest();case 17:return s=e.sent,expect(s.url).toBe("http://tus.io/uploads/blargh"),expect(s.method).toBe("PATCH"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(s.requestHeaders["Upload-Offset"]).toBe(0),expect(s.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(s.body.size).toBe(7),s.respondWith({status:204,responseHeaders:{"Upload-Offset":7}}),e.next=27,t.nextRequest();case 27:return s=e.sent,expect(s.url).toBe("http://tus.io/uploads/blargh"),expect(s.method).toBe("PATCH"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(s.requestHeaders["Upload-Offset"]).toBe(7),expect(s.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(s.body.size).toBe(4),s.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),e.next=37,n.onSuccess.toBeCalled;case 37:expect(o.url).toBe("http://tus.io/uploads/blargh"),expect(n.onProgress).toHaveBeenCalledWith(11,11),expect(n.onChunkComplete).toHaveBeenCalledWith(7,7,11),expect(n.onChunkComplete).toHaveBeenCalledWith(4,11,11);case 41:case"end":return e.stop()}}),e)})))),it("should add the original request to errors",u(i().mark((function e(){var t,r,n,o,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/uploads",retryDelays:null,onError:p("onError")},(o=new d.Upload(r,n)).start(),e.next=7,t.nextRequest();case 7:return s=e.sent,expect(s.url).toBe("http://tus.io/uploads"),expect(s.method).toBe("POST"),s.respondWith({status:500,responseHeaders:{Custom:"blargh"}}),e.next=13,n.onError.toBeCalled;case 13:a=e.sent,expect(o.url).toBe(null),expect(a.message).toBe("tus: unexpected response while creating upload, originated from request (method: POST, url: http://tus.io/uploads, response code: 500, response text: , request id: n/a)"),expect(a.originalRequest).toBeDefined(),expect(a.originalResponse).toBeDefined(),expect(a.originalResponse.getHeader("Custom")).toBe("blargh");case 19:case"end":return e.stop()}}),e)})))),it("should only create an upload for empty files",u(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h(""),n={httpStack:t,endpoint:"http://tus.io/uploads",onSuccess:p("onSuccess")},new d.Upload(r,n).start(),e.next=7,t.nextRequest();case 7:return o=e.sent,expect(o.url).toBe("http://tus.io/uploads"),expect(o.method).toBe("POST"),expect(o.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(o.requestHeaders["Upload-Length"]).toBe(0),o.respondWith({status:201,responseHeaders:{Location:"http://tus.io/uploads/empty"}}),e.next=15,n.onSuccess.toBeCalled;case 15:expect(n.onSuccess).toHaveBeenCalled();case 16:case"end":return e.stop()}}),e)})))),it("should not resume a finished upload",u(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/uploads",onProgress:function(){},onSuccess:p("onSuccess"),uploadUrl:"http://tus.io/uploads/resuming"},spyOn(n,"onProgress"),new d.Upload(r,n).start(),e.next=8,t.nextRequest();case 8:return o=e.sent,expect(o.url).toBe("http://tus.io/uploads/resuming"),expect(o.method).toBe("HEAD"),expect(o.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),o.respondWith({status:204,responseHeaders:{"Upload-Length":"11","Upload-Offset":"11"}}),e.next=15,n.onSuccess.toBeCalled;case 15:expect(n.onProgress).toHaveBeenCalledWith(11,11),expect(n.onSuccess).toHaveBeenCalled();case 17:case"end":return e.stop()}}),e)})))),it("should resume an upload from a specified url",u(i().mark((function e(){var t,r,n,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/uploads",uploadUrl:"http://tus.io/files/upload",onProgress:function(){},onSuccess:p("onSuccess"),fingerprint:function(){}},spyOn(n,"fingerprint").and.resolveTo("fingerprinted"),spyOn(n,"onProgress"),(o=new d.Upload(r,n)).start(),expect(n.fingerprint).toHaveBeenCalled(),e.next=10,t.nextRequest();case 10:return s=e.sent,expect(s.url).toBe("http://tus.io/files/upload"),expect(s.method).toBe("HEAD"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),s.respondWith({status:204,responseHeaders:{"Upload-Length":11,"Upload-Offset":3}}),e.next=17,t.nextRequest();case 17:return s=e.sent,expect(s.url).toBe("http://tus.io/files/upload"),expect(s.method).toBe("PATCH"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(s.requestHeaders["Upload-Offset"]).toBe(3),expect(s.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(s.body.size).toBe(8),s.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),e.next=27,n.onSuccess.toBeCalled;case 27:expect(n.onProgress).toHaveBeenCalledWith(11,11),expect(o.url).toBe("http://tus.io/files/upload");case 29:case"end":return e.stop()}}),e)})))),it("should resume a previously started upload",u(i().mark((function e(){var t,r,n,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/uploads",onSuccess:p("onSuccess"),onError:function(){}},(o=new d.Upload(r,n)).start(),e.next=7,t.nextRequest();case 7:return s=e.sent,expect(s.url).toBe("http://tus.io/uploads"),expect(s.method).toBe("POST"),s.respondWith({status:201,responseHeaders:{Location:"http://tus.io/uploads/blargh"}}),e.next=13,t.nextRequest();case 13:return s=e.sent,expect(s.url).toBe("http://tus.io/uploads/blargh"),expect(s.method).toBe("PATCH"),o.abort(),s.respondWith({status:204,responseHeaders:{"Upload-Offset":5}}),o.start(),e.next=21,t.nextRequest();case 21:return s=e.sent,expect(s.url).toBe("http://tus.io/uploads/blargh"),expect(s.method).toBe("HEAD"),s.respondWith({status:204,responseHeaders:{"Upload-Offset":5,"Upload-Length":11}}),e.next=27,t.nextRequest();case 27:return s=e.sent,expect(s.url).toBe("http://tus.io/uploads/blargh"),expect(s.method).toBe("PATCH"),s.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),e.next=33,n.onSuccess.toBeCalled;case 33:expect(n.onSuccess).toHaveBeenCalled();case 34:case"end":return e.stop()}}),e)})))),it("should override the PATCH method",u(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/uploads",uploadUrl:"http://tus.io/files/upload",overridePatchMethod:!0},new d.Upload(r,n).start(),e.next=7,t.nextRequest();case 7:return o=e.sent,expect(o.url).toBe("http://tus.io/files/upload"),expect(o.method).toBe("HEAD"),expect(o.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),o.respondWith({status:204,responseHeaders:{"Upload-Length":11,"Upload-Offset":3}}),e.next=14,t.nextRequest();case 14:o=e.sent,expect(o.url).toBe("http://tus.io/files/upload"),expect(o.method).toBe("POST"),expect(o.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(o.requestHeaders["Upload-Offset"]).toBe(3),expect(o.requestHeaders["X-HTTP-Method-Override"]).toBe("PATCH"),o.respondWith({status:204,responseHeaders:{"Upload-Offset":11}});case 21:case"end":return e.stop()}}),e)})))),it("should emit an error if an upload is locked",u(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/uploads",uploadUrl:"http://tus.io/files/upload",onError:p("onError"),retryDelays:null},new d.Upload(r,n).start(),e.next=7,t.nextRequest();case 7:return o=e.sent,expect(o.url).toBe("http://tus.io/files/upload"),expect(o.method).toBe("HEAD"),o.respondWith({status:423}),e.next=13,n.onError.toBeCalled;case 13:expect(n.onError).toHaveBeenCalledWith(new Error("tus: upload is currently locked; retry later, originated from request (method: HEAD, url: http://tus.io/files/upload, response code: 423, response text: , request id: n/a)"));case 14:case"end":return e.stop()}}),e)})))),it("should emit an error if no Location header is presented",u(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/uploads",onError:p("onError"),retryDelays:null},new d.Upload(r,n).start(),e.next=7,t.nextRequest();case 7:return o=e.sent,expect(o.url).toBe("http://tus.io/uploads"),expect(o.method).toBe("POST"),o.respondWith({status:201}),e.next=13,n.onError.toBeCalled;case 13:expect(n.onError).toHaveBeenCalledWith(new Error("tus: invalid or missing Location header, originated from request (method: POST, url: http://tus.io/uploads, response code: 201, response text: , request id: n/a)"));case 14:case"end":return e.stop()}}),e)})))),it("should throw if retryDelays is not an array",(function(){var e=h("hello world"),t=new d.Upload(e,{endpoint:"http://endpoint/",retryDelays:44});expect(t.start.bind(t)).toThrowError("tus: the `retryDelays` option must either be an array or null")})),it("should retry the upload",u(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/files/",retryDelays:[10,10,10],onSuccess:p("onSuccess")},new d.Upload(r,n).start(),e.next=7,t.nextRequest();case 7:return o=e.sent,expect(o.url).toBe("http://tus.io/files/"),expect(o.method).toBe("POST"),o.respondWith({status:500}),e.next=13,t.nextRequest();case 13:return o=e.sent,expect(o.url).toBe("http://tus.io/files/"),expect(o.method).toBe("POST"),o.respondWith({status:201,responseHeaders:{Location:"/files/foo"}}),e.next=19,t.nextRequest();case 19:return o=e.sent,expect(o.url).toBe("http://tus.io/files/foo"),expect(o.method).toBe("PATCH"),o.respondWith({status:423}),e.next=25,t.nextRequest();case 25:return o=e.sent,expect(o.url).toBe("http://tus.io/files/foo"),expect(o.method).toBe("HEAD"),o.respondWith({status:201,responseHeaders:{"Upload-Offset":0,"Upload-Length":11}}),e.next=31,t.nextRequest();case 31:return o=e.sent,expect(o.url).toBe("http://tus.io/files/foo"),expect(o.method).toBe("PATCH"),o.respondWith({status:409}),e.next=37,t.nextRequest();case 37:return o=e.sent,expect(o.url).toBe("http://tus.io/files/foo"),expect(o.method).toBe("HEAD"),o.respondWith({status:201,responseHeaders:{"Upload-Offset":0,"Upload-Length":11}}),e.next=43,t.nextRequest();case 43:return o=e.sent,expect(o.url).toBe("http://tus.io/files/foo"),expect(o.method).toBe("PATCH"),o.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),e.next=49,n.onSuccess.toBeCalled;case 49:expect(n.onSuccess).toHaveBeenCalled();case 50:case"end":return e.stop()}}),e)})))),it("should retry the upload when onShouldRetry specified and returns true",u(i().mark((function e(){var t,r,o,s,a,u,c,f,y,v,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),o={httpStack:t,endpoint:"http://tus.io/files/",retryDelays:[10,10,10],onSuccess:p("onSuccess"),onShouldRetry:function(){return!0}},spyOn(o,"onShouldRetry").and.callThrough(),spyOn(d.Upload.prototype,"_emitError").and.callThrough(),(s=new d.Upload(r,o)).start(),e.next=9,t.nextRequest();case 9:return a=e.sent,expect(a.url).toBe("http://tus.io/files/"),expect(a.method).toBe("POST"),a.respondWith({status:500}),e.next=15,t.nextRequest();case 15:return a=e.sent,expect(a.url).toBe("http://tus.io/files/"),expect(a.method).toBe("POST"),a.respondWith({status:201,responseHeaders:{Location:"/files/foo"}}),e.next=21,t.nextRequest();case 21:return a=e.sent,expect(a.url).toBe("http://tus.io/files/foo"),expect(a.method).toBe("PATCH"),a.respondWith({status:423}),e.next=27,t.nextRequest();case 27:return a=e.sent,expect(a.url).toBe("http://tus.io/files/foo"),expect(a.method).toBe("HEAD"),a.respondWith({status:201,responseHeaders:{"Upload-Offset":0,"Upload-Length":11}}),e.next=33,t.nextRequest();case 33:return a=e.sent,expect(a.url).toBe("http://tus.io/files/foo"),expect(a.method).toBe("PATCH"),a.respondWith({status:409}),e.next=39,t.nextRequest();case 39:return a=e.sent,expect(a.url).toBe("http://tus.io/files/foo"),expect(a.method).toBe("HEAD"),a.respondWith({status:201,responseHeaders:{"Upload-Offset":0,"Upload-Length":11}}),e.next=45,t.nextRequest();case 45:return a=e.sent,expect(a.url).toBe("http://tus.io/files/foo"),expect(a.method).toBe("PATCH"),a.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),e.next=51,o.onSuccess.toBeCalled;case 51:expect(o.onSuccess).toHaveBeenCalled(),u=s._emitError.calls.argsFor(0),c=n(u,1),f=c[0],expect(o.onShouldRetry).toHaveBeenCalled(),expect(o.onShouldRetry.calls.argsFor(0)).toEqual([f,0,s.options]),y=s._emitError.calls.argsFor(1),v=n(y,1),m=v[0],expect(o.onShouldRetry.calls.argsFor(1)).toEqual([m,1,s.options]);case 57:case"end":return e.stop()}}),e)})))),it("should not retry the upload when callback specified and returns false",u(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/files/",retryDelays:[10,10,10],onSuccess:p("onSuccess"),onError:p("onError"),onShouldRetry:function(){return!1}},new d.Upload(r,n).start(),e.next=7,t.nextRequest();case 7:return o=e.sent,expect(o.url).toBe("http://tus.io/files/"),expect(o.method).toBe("POST"),expect(n.onError).not.toHaveBeenCalled(),o.respondWith({status:500}),e.next=14,n.onError.toBeCalled;case 14:expect(n.onSuccess).not.toHaveBeenCalled(),expect(n.onError).toHaveBeenCalledTimes(1);case 16:case"end":return e.stop()}}),e)})))),it("should not retry if the error has not been caused by a request",u(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h("hello world"),r={httpStack:new l,endpoint:"http://tus.io/files/",retryDelays:[10,10,10],onSuccess:function(){},onError:function(){}},spyOn(r,"onSuccess"),spyOn(r,"onError"),n=new d.Upload(t,r),spyOn(n,"_createUpload"),n.start(),e.next=9,f(200);case 9:o=new Error("custom error"),n._emitError(o),expect(n._createUpload).toHaveBeenCalledTimes(1),expect(r.onError).toHaveBeenCalledWith(o),expect(r.onSuccess).not.toHaveBeenCalled();case 14:case"end":return e.stop()}}),e)})))),it("should stop retrying after all delays have been used",u(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/files/",retryDelays:[10],onSuccess:function(){},onError:p("onError")},spyOn(n,"onSuccess"),new d.Upload(r,n).start(),e.next=8,t.nextRequest();case 8:return o=e.sent,expect(o.url).toBe("http://tus.io/files/"),expect(o.method).toBe("POST"),o.respondWith({status:500}),e.next=14,t.nextRequest();case 14:return o=e.sent,expect(o.url).toBe("http://tus.io/files/"),expect(o.method).toBe("POST"),expect(n.onError).not.toHaveBeenCalled(),o.respondWith({status:500}),e.next=21,n.onError.toBeCalled;case 21:expect(n.onSuccess).not.toHaveBeenCalled(),expect(n.onError).toHaveBeenCalledTimes(1);case 23:case"end":return e.stop()}}),e)})))),it("should stop retrying when the abort function is called",u(i().mark((function e(){var t,r,n,o,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/files/",retryDelays:[10],onError:function(){}},spyOn(n,"onError"),(o=new d.Upload(r,n)).start(),e.next=8,t.nextRequest();case 8:return s=e.sent,expect(s.url).toBe("http://tus.io/files/"),expect(s.method).toBe("POST"),spyOn(o,"start").and.callThrough(),o.abort(),s.respondWith({status:500}),e.next=16,Promise.race([t.nextRequest(),f(100)]);case 16:a=e.sent,expect(a).toBe("timed out");case 18:case"end":return e.stop()}}),e)})))),it("should stop upload when the abort function is called during a callback",u(i().mark((function e(){var t,r,n,o,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/files/",chunkSize:5,onChunkComplete:function(){o.abort()}},spyOn(n,"onChunkComplete").and.callThrough(),(o=new d.Upload(r,n)).start(),e.next=8,t.nextRequest();case 8:return s=e.sent,expect(s.url).toBe("http://tus.io/files/"),expect(s.method).toBe("POST"),s.respondWith({status:201,responseHeaders:{Location:"/files/foo"}}),e.next=14,t.nextRequest();case 14:return s=e.sent,expect(s.url).toBe("http://tus.io/files/foo"),expect(s.method).toBe("PATCH"),s.respondWith({status:204,responseHeaders:{"Upload-Offset":5}}),e.next=20,Promise.race([t.nextRequest(),f(200)]);case 20:a=e.sent,expect(n.onChunkComplete).toHaveBeenCalled(),expect(a).toBe("timed out");case 23:case"end":return e.stop()}}),e)})))),it("should stop upload when the abort function is called during the POST request",u(i().mark((function e(){var t,r,n,o,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/files/",onError:function(){}},spyOn(n,"onError").and.callThrough(),(o=new d.Upload(r,n)).start(),e.next=8,t.nextRequest();case 8:return s=e.sent,expect(s.url).toBe("http://tus.io/files/"),expect(s.method).toBe("POST"),o.abort(),s.respondWith({status:201,responseHeaders:{Location:"/files/foo"}}),e.next=15,Promise.race([t.nextRequest(),f(200)]);case 15:a=e.sent,expect(n.onError).not.toHaveBeenCalled(),expect(a).toBe("timed out");case 18:case"end":return e.stop()}}),e)})))),it("should reset the attempt counter if an upload proceeds",u(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l,r=h("hello world"),n={httpStack:t,endpoint:"http://tus.io/files/",retryDelays:[10],onError:function(){},onSuccess:p("onSuccess")},spyOn(n,"onError"),new d.Upload(r,n).start(),e.next=8,t.nextRequest();case 8:return o=e.sent,expect(o.url).toBe("http://tus.io/files/"),expect(o.method).toBe("POST"),o.respondWith({status:201,responseHeaders:{Location:"/files/foo"}}),e.next=14,t.nextRequest();case 14:return o=e.sent,expect(o.url).toBe("http://tus.io/files/foo"),expect(o.method).toBe("PATCH"),o.respondWith({status:500}),e.next=20,t.nextRequest();case 20:return o=e.sent,expect(o.url).toBe("http://tus.io/files/foo"),expect(o.method).toBe("HEAD"),o.respondWith({status:204,responseHeaders:{"Upload-Offset":0,"Upload-Length":11}}),e.next=26,t.nextRequest();case 26:return o=e.sent,expect(o.url).toBe("http://tus.io/files/foo"),expect(o.method).toBe("PATCH"),o.respondWith({status:204,responseHeaders:{"Upload-Offset":5}}),e.next=32,t.nextRequest();case 32:return o=e.sent,expect(o.url).toBe("http://tus.io/files/foo"),expect(o.method).toBe("PATCH"),o.respondWith({status:500}),e.next=38,t.nextRequest();case 38:return o=e.sent,expect(o.url).toBe("http://tus.io/files/foo"),expect(o.method).toBe("HEAD"),o.respondWith({status:204,responseHeaders:{"Upload-Offset":5,"Upload-Length":11}}),e.next=44,t.nextRequest();case 44:return o=e.sent,expect(o.url).toBe("http://tus.io/files/foo"),expect(o.method).toBe("PATCH"),o.respondWith({status:204,responseHeaders:{"Upload-Offset":11}}),e.next=50,n.onSuccess.toBeCalled;case 50:expect(n.onError).not.toHaveBeenCalled(),expect(n.onSuccess).toHaveBeenCalled();case 52:case"end":return e.stop()}}),e)}))))}))}))},{"../..":4,"./helpers/utils":60}],63:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,s=Object.create(o.prototype),i=new U(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return _()}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=B(i,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function h(){}function d(){}function y(){}var v={};c(v,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&r.call(g,i)&&(v=g);var x=y.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(s,i,a,u){var c=p(e[s],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,u)}))}u(c.arg)}var s;this._invoke=function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return s=s?s.then(n,n):n()}}function B(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,B(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return d.prototype=y,c(x,"constructor",y),c(y,"constructor",d),d.displayName=c(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new b(l(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(x),c(x,u,"Generator"),c(x,i,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,U.prototype={constructor:U,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function s(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,u,"next",e)}function u(e){s(i,n,o,a,u,"throw",e)}a(void 0)}))}}var a=e("axios"),u=e("./helpers/utils").getBlob,c=e("../..");function l(e){return a.get(e.url).then((function(t){return expect(t.status).toBe(200),expect(t.data).toBe("hello world"),function(e){return a.head(e.url,{headers:{"Tus-Resumable":"1.0.0"}}).then((function(t){expect(t.status).toBe(200),expect(t.data).toBe(""),expect(t.headers["tus-resumable"]).toBe("1.0.0"),expect(t.headers["upload-offset"]).toBe("11"),expect(t.headers["upload-length"]).toBe("11");var r=t.headers["upload-metadata"];expect(r).toBeTruthy();var n=r.split(",");return expect(n).toContain("filename aGVsbG8udHh0"),expect(n).toContain("filetype dGV4dC9wbGFpbg=="),expect(n).toContain("nonlatin c8WCb8WEY2U="),expect(n).toContain("number MTAw"),expect(n.length).toBe(4),e}))}(e)}))}function p(e){return a.get(e.url,{validateStatus:function(e){return 404===e}}).then((function(t){return expect(t.status).toBe(404),e}))}describe("tus",(function(){describe("end-to-end",(function(){it("should upload to a real tus server",i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var r=u("hello world"),n={endpoint:"https://tusd.tusdemo.net/files/",metadata:{nonlatin:"soce",number:100,filename:"hello.txt",filetype:"text/plain"},onSuccess:function(){expect(o.url).toMatch(/^https:\/\/tusd\.tusdemo\.net\/files\//),console.log("Upload URL:",o.url),e(o)},onError:function(e){t(e)}},o=new c.Upload(r,n);o.start()})).then(l).then((function(e){return e.abort(!0).then((function(){return e}))})).then(p));case 1:case"end":return e.stop()}}),e)}))),2e4),it("should upload to a real tus server with creation-with-upload",i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var r=u("hello world"),n={endpoint:"https://tusd.tusdemo.net/files/",metadata:{nonlatin:"soce",number:100,filename:"hello.txt",filetype:"text/plain"},onSuccess:function(){expect(o.url).toMatch(/^https:\/\/tusd\.tusdemo\.net\/files\//),console.log("Upload URL:",o.url),e(o)},onError:function(e){t(e)}},o=new c.Upload(r,n);o.start()})).then(l));case 1:case"end":return e.stop()}}),e)}))),2e4)}))}))},{"../..":4,"./helpers/utils":60,axios:17}],64:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,s=Object.create(o.prototype),i=new U(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return _()}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=B(i,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function h(){}function d(){}function y(){}var v={};c(v,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&r.call(g,i)&&(v=g);var x=y.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(s,i,a,u){var c=p(e[s],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,u)}))}u(c.arg)}var s;this._invoke=function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return s=s?s.then(n,n):n()}}function B(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,B(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return d.prototype=y,c(x,"constructor",y),c(y,"constructor",d),d.displayName=c(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new b(l(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(x),c(x,u,"Generator"),c(x,i,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,U.prototype={constructor:U,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function s(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,u,"next",e)}function u(e){s(i,n,o,a,u,"throw",e)}a(void 0)}))}}var a=e("./helpers/utils"),u=a.TestHttpStack,c=a.waitableFunction,l=a.wait,p=a.getBlob,f=e("../..");describe("tus",(function(){describe("parallel uploading",(function(){it("should throw if incompatible options are used",(function(){var e=p("hello world"),t=new f.Upload(e,{endpoint:"https://tus.io/uploads",parallelUploads:2,uploadUrl:"foo"});expect(t.start.bind(t)).toThrowError("tus: cannot use the uploadUrl option when parallelUploads is enabled")})),it("should throw if `parallelUploadBoundaries` is passed without `parallelUploads`",(function(){var e=p("hello world"),t=new f.Upload(e,{endpoint:"https://tus.io/uploads",parallelUploadBoundaries:[{start:0,end:2}]});expect(t.start.bind(t)).toThrowError("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled")})),it("should throw if `parallelUploadBoundaries` is not the same length as the value of `parallelUploads`",(function(){var e=p("hello world"),t=new f.Upload(e,{endpoint:"https://tus.io/uploads",parallelUploads:3,parallelUploadBoundaries:[{start:0,end:2}]});expect(t.start.bind(t)).toThrowError("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`")})),it("should split a file into multiple parts and create an upload for each",i(o().mark((function e(){var t,r,n,s,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new u,r={addUpload:function(e,t){return expect(e).toBe("fingerprinted"),expect(t.uploadUrl).toBeUndefined(),expect(t.size).toBe(11),expect(t.parallelUploadUrls).toEqual(["https://tus.io/uploads/upload1","https://tus.io/uploads/upload2"]),Promise.resolve("tus::fingerprinted::1337")},removeUpload:function(e){return expect(e).toBe("tus::fingerprinted::1337"),Promise.resolve()}},spyOn(r,"removeUpload").and.callThrough(),spyOn(r,"addUpload").and.callThrough(),n=p("hello world"),s={httpStack:t,urlStorage:r,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!0,parallelUploads:2,retryDelays:[10],endpoint:"https://tus.io/uploads",headers:{Custom:"blargh"},metadata:{foo:"hello"},onProgress:function(){},onSuccess:c(),fingerprint:function(){return Promise.resolve("fingerprinted")}},spyOn(s,"onProgress"),(i=new f.Upload(n,s)).start(),e.next=11,t.nextRequest();case 11:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads"),expect(a.method).toBe("POST"),expect(a.requestHeaders.Custom).toBe("blargh"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Length"]).toBe(5),expect(a.requestHeaders["Upload-Concat"]).toBe("partial"),expect(a.requestHeaders["Upload-Metadata"]).toBeUndefined(),a.respondWith({status:201,responseHeaders:{Location:"https://tus.io/uploads/upload1"}}),e.next=22,t.nextRequest();case 22:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads"),expect(a.method).toBe("POST"),expect(a.requestHeaders.Custom).toBe("blargh"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Length"]).toBe(6),expect(a.requestHeaders["Upload-Concat"]).toBe("partial"),expect(a.requestHeaders["Upload-Metadata"]).toBeUndefined(),a.respondWith({status:201,responseHeaders:{Location:"https://tus.io/uploads/upload2"}}),e.next=33,t.nextRequest();case 33:return a=e.sent,expect(r.addUpload).toHaveBeenCalled(),expect(a.url).toBe("https://tus.io/uploads/upload1"),expect(a.method).toBe("PATCH"),expect(a.requestHeaders.Custom).toBe("blargh"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Offset"]).toBe(0),expect(a.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(a.body.size).toBe(5),a.respondWith({status:204,responseHeaders:{"Upload-Offset":5}}),e.next=45,t.nextRequest();case 45:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads/upload2"),expect(a.method).toBe("PATCH"),expect(a.requestHeaders.Custom).toBe("blargh"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Offset"]).toBe(0),expect(a.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(a.body.size).toBe(6),a.respondWith({status:500}),e.next=56,t.nextRequest();case 56:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads/upload2"),expect(a.method).toBe("HEAD"),a.respondWith({status:204,responseHeaders:{"Upload-Length":11,"Upload-Offset":0}}),e.next=62,t.nextRequest();case 62:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads/upload2"),expect(a.method).toBe("PATCH"),expect(a.requestHeaders.Custom).toBe("blargh"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Offset"]).toBe(0),expect(a.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(a.body.size).toBe(6),a.respondWith({status:204,responseHeaders:{"Upload-Offset":6}}),e.next=73,t.nextRequest();case 73:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads"),expect(a.method).toBe("POST"),expect(a.requestHeaders.Custom).toBe("blargh"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Length"]).toBeUndefined(),expect(a.requestHeaders["Upload-Concat"]).toBe("final;https://tus.io/uploads/upload1 https://tus.io/uploads/upload2"),expect(a.requestHeaders["Upload-Metadata"]).toBe("foo aGVsbG8="),a.respondWith({status:201,responseHeaders:{Location:"https://tus.io/uploads/upload3"}}),e.next=84,s.onSuccess.toBeCalled;case 84:expect(i.url).toBe("https://tus.io/uploads/upload3"),expect(s.onProgress).toHaveBeenCalledWith(5,11),expect(s.onProgress).toHaveBeenCalledWith(11,11),expect(r.removeUpload).toHaveBeenCalled();case 88:case"end":return e.stop()}}),e)})))),it("should split a file into multiple parts based on custom `parallelUploadBoundaries`",i(o().mark((function e(){var t,r,n,s,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new u,r=[{start:0,end:1},{start:1,end:11}],n=p("hello world"),s={httpStack:t,parallelUploads:2,parallelUploadBoundaries:r,endpoint:"https://tus.io/uploads",onSuccess:c()},(i=new f.Upload(n,s)).start(),e.next=8,t.nextRequest();case 8:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads"),expect(a.method).toBe("POST"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Length"]).toBe(1),expect(a.requestHeaders["Upload-Concat"]).toBe("partial"),a.respondWith({status:201,responseHeaders:{Location:"https://tus.io/uploads/upload1"}}),e.next=17,t.nextRequest();case 17:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads"),expect(a.method).toBe("POST"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Length"]).toBe(10),expect(a.requestHeaders["Upload-Concat"]).toBe("partial"),a.respondWith({status:201,responseHeaders:{Location:"https://tus.io/uploads/upload2"}}),e.next=26,t.nextRequest();case 26:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads/upload1"),expect(a.method).toBe("PATCH"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Offset"]).toBe(0),expect(a.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(a.body.size).toBe(1),a.respondWith({status:204,responseHeaders:{"Upload-Offset":1}}),e.next=36,t.nextRequest();case 36:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads/upload2"),expect(a.method).toBe("PATCH"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Offset"]).toBe(0),expect(a.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(a.body.size).toBe(10),a.respondWith({status:204,responseHeaders:{"Upload-Length":11,"Upload-Offset":0}}),e.next=46,t.nextRequest();case 46:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads/upload2"),expect(a.method).toBe("PATCH"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Offset"]).toBe(0),expect(a.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(a.body.size).toBe(10),a.respondWith({status:204,responseHeaders:{"Upload-Offset":10}}),e.next=56,t.nextRequest();case 56:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads"),expect(a.method).toBe("POST"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Length"]).toBeUndefined(),expect(a.requestHeaders["Upload-Concat"]).toBe("final;https://tus.io/uploads/upload1 https://tus.io/uploads/upload2"),a.respondWith({status:201,responseHeaders:{Location:"https://tus.io/uploads/upload3"}}),e.next=65,s.onSuccess.toBeCalled;case 65:expect(i.url).toBe("https://tus.io/uploads/upload3");case 66:case"end":return e.stop()}}),e)})))),it("should emit error from a partial upload",i(o().mark((function e(){var t,r,n,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new u,r=p("hello world"),n={httpStack:t,parallelUploads:2,retryDelays:null,endpoint:"https://tus.io/uploads",onError:c("onError")},new f.Upload(r,n).start(),e.next=7,t.nextRequest();case 7:return s=e.sent,expect(s.url).toBe("https://tus.io/uploads"),expect(s.method).toBe("POST"),expect(s.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(s.requestHeaders["Upload-Length"]).toBe(5),s.respondWith({status:500}),e.next=15,n.onError.toBeCalled;case 15:i=e.sent,expect(i.message).toBe("tus: unexpected response while creating upload, originated from request (method: POST, url: https://tus.io/uploads, response code: 500, response text: , request id: n/a)"),expect(i.originalRequest).toBe(s);case 18:case"end":return e.stop()}}),e)})))),it("should resume the partial uploads",i(o().mark((function e(){var t,r,n,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new u,r=p("hello world"),n={httpStack:t,parallelUploads:1,endpoint:"https://tus.io/uploads",onProgress:function(){},onSuccess:c()},spyOn(n,"onProgress"),(s=new f.Upload(r,n)).resumeFromPreviousUpload({urlStorageKey:"tus::fingerprint::1337",parallelUploadUrls:["https://tus.io/uploads/upload1","https://tus.io/uploads/upload2"]}),s.start(),e.next=9,t.nextRequest();case 9:return i=e.sent,expect(i.url).toBe("https://tus.io/uploads/upload1"),expect(i.method).toBe("HEAD"),i.respondWith({status:204,responseHeaders:{"Upload-Length":5,"Upload-Offset":2}}),e.next=15,t.nextRequest();case 15:return i=e.sent,expect(i.url).toBe("https://tus.io/uploads/upload2"),expect(i.method).toBe("HEAD"),i.respondWith({status:204,responseHeaders:{"Upload-Length":6,"Upload-Offset":0}}),e.next=21,t.nextRequest();case 21:return i=e.sent,expect(i.url).toBe("https://tus.io/uploads/upload1"),expect(i.method).toBe("PATCH"),expect(i.body.size).toBe(3),i.respondWith({status:204,responseHeaders:{"Upload-Offset":5}}),e.next=28,t.nextRequest();case 28:return i=e.sent,expect(i.url).toBe("https://tus.io/uploads/upload2"),expect(i.method).toBe("PATCH"),expect(i.body.size).toBe(6),i.respondWith({status:204,responseHeaders:{"Upload-Offset":6}}),e.next=35,t.nextRequest();case 35:return i=e.sent,expect(i.url).toBe("https://tus.io/uploads"),expect(i.method).toBe("POST"),expect(i.requestHeaders["Upload-Concat"]).toBe("final;https://tus.io/uploads/upload1 https://tus.io/uploads/upload2"),i.respondWith({status:201,responseHeaders:{Location:"https://tus.io/uploads/upload3"}}),e.next=42,n.onSuccess.toBeCalled;case 42:expect(s.url).toBe("https://tus.io/uploads/upload3"),expect(n.onProgress).toHaveBeenCalledWith(5,11),expect(n.onProgress).toHaveBeenCalledWith(11,11);case 45:case"end":return e.stop()}}),e)})))),it("should abort all partial uploads and resume from them",i(o().mark((function e(){var t,r,n,s,i,a,h,d,y;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new u,r=p("hello world"),n={httpStack:t,parallelUploads:2,endpoint:"https://tus.io/uploads",onProgress:function(){},onSuccess:c(),fingerprint:function(){return Promise.resolve("fingerprinted")}},spyOn(n,"onProgress"),(s=new f.Upload(r,n)).start(),e.next=8,t.nextRequest();case 8:return i=e.sent,expect(i.url).toBe("https://tus.io/uploads"),expect(i.method).toBe("POST"),expect(i.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(i.requestHeaders["Upload-Length"]).toBe(5),expect(i.requestHeaders["Upload-Concat"]).toBe("partial"),expect(i.requestHeaders["Upload-Metadata"]).toBeUndefined(),i.respondWith({status:201,responseHeaders:{Location:"https://tus.io/uploads/upload1"}}),e.next=18,t.nextRequest();case 18:return i=e.sent,expect(i.url).toBe("https://tus.io/uploads"),expect(i.method).toBe("POST"),expect(i.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(i.requestHeaders["Upload-Length"]).toBe(6),expect(i.requestHeaders["Upload-Concat"]).toBe("partial"),expect(i.requestHeaders["Upload-Metadata"]).toBeUndefined(),i.respondWith({status:201,responseHeaders:{Location:"https://tus.io/uploads/upload2"}}),e.next=28,t.nextRequest();case 28:return a=e.sent,expect(a.url).toBe("https://tus.io/uploads/upload1"),expect(a.method).toBe("PATCH"),expect(a.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(a.requestHeaders["Upload-Offset"]).toBe(0),expect(a.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(a.body.size).toBe(5),e.next=37,t.nextRequest();case 37:return h=e.sent,expect(h.url).toBe("https://tus.io/uploads/upload2"),expect(h.method).toBe("PATCH"),expect(h.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(h.requestHeaders["Upload-Offset"]).toBe(0),expect(h.requestHeaders["Content-Type"]).toBe("application/offset+octet-stream"),expect(h.body.size).toBe(6),s.abort(),a.respondWith({status:204,responseHeaders:{"Upload-Offset":5}}),h.respondWith({status:204,responseHeaders:{"Upload-Offset":6}}),d=t.nextRequest(),e.next=50,Promise.race([d,l(100)]);case 50:return y=e.sent,expect(y).toBe("timed out"),s.start(),e.next=55,d;case 55:return i=e.sent,expect(i.url).toBe("https://tus.io/uploads/upload1"),expect(i.method).toBe("HEAD"),i.respondWith({status:204,responseHeaders:{"Upload-Length":5,"Upload-Offset":5}}),e.next=61,t.nextRequest();case 61:return i=e.sent,expect(i.url).toBe("https://tus.io/uploads/upload2"),expect(i.method).toBe("HEAD"),i.respondWith({status:204,responseHeaders:{"Upload-Length":6,"Upload-Offset":6}}),e.next=67,t.nextRequest();case 67:return i=e.sent,expect(i.url).toBe("https://tus.io/uploads"),expect(i.method).toBe("POST"),expect(i.requestHeaders["Tus-Resumable"]).toBe("1.0.0"),expect(i.requestHeaders["Upload-Length"]).toBeUndefined(),expect(i.requestHeaders["Upload-Concat"]).toBe("final;https://tus.io/uploads/upload1 https://tus.io/uploads/upload2"),i.respondWith({status:201,responseHeaders:{Location:"https://tus.io/uploads/upload3"}}),e.next=76,n.onSuccess.toBeCalled;case 76:expect(s.url).toBe("https://tus.io/uploads/upload3"),expect(n.onProgress).toHaveBeenCalledWith(5,11),expect(n.onProgress).toHaveBeenCalledWith(11,11);case 79:case"end":return e.stop()}}),e)}))))}))}))},{"../..":4,"./helpers/utils":60}],65:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,s=Object.create(o.prototype),i=new U(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return _()}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=B(i,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function h(){}function d(){}function y(){}var v={};c(v,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&r.call(g,i)&&(v=g);var x=y.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(s,i,a,u){var c=p(e[s],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,u)}))}u(c.arg)}var s;this._invoke=function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return s=s?s.then(n,n):n()}}function B(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,B(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return d.prototype=y,c(x,"constructor",y),c(y,"constructor",d),d.displayName=c(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new b(l(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(x),c(x,u,"Generator"),c(x,i,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,U.prototype={constructor:U,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function s(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,u,"next",e)}function u(e){s(i,n,o,a,u,"throw",e)}a(void 0)}))}}var a=e("./helpers/utils"),u=a.TestHttpStack,c=a.getBlob,l=e("../..");describe("tus",(function(){describe("terminate upload",(function(){it("should terminate upload when abort is called with true",i(o().mark((function e(){var t,r,n,s,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new u,n=c("hello world"),s={httpStack:r,endpoint:"http://tus.io/files/",chunkSize:5,onChunkComplete:function(){t=i.abort(!0)}},spyOn(s,"onChunkComplete").and.callThrough(),(i=new l.Upload(n,s)).start(),e.next=8,r.nextRequest();case 8:return a=e.sent,expect(a.url).toBe("http://tus.io/files/"),expect(a.method).toBe("POST"),a.respondWith({status:201,responseHeaders:{Location:"/files/foo"}}),e.next=14,r.nextRequest();case 14:return a=e.sent,expect(a.url).toBe("http://tus.io/files/foo"),expect(a.method).toBe("PATCH"),a.respondWith({status:204,responseHeaders:{"Upload-Offset":5}}),e.next=20,r.nextRequest();case 20:return a=e.sent,expect(a.url).toBe("http://tus.io/files/foo"),expect(a.method).toBe("DELETE"),a.respondWith({status:204}),expect(s.onChunkComplete).toHaveBeenCalled(),e.next=27,t;case 27:case"end":return e.stop()}}),e)})))),it("should retry terminate when an error is returned on first try",i(o().mark((function e(){var t,r,n,s,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new u,n=c("hello world"),s={httpStack:r,endpoint:"http://tus.io/files/",chunkSize:5,retryDelays:[10,10,10],onChunkComplete:function(){t=i.abort(!0)}},spyOn(s,"onChunkComplete").and.callThrough(),(i=new l.Upload(n,s)).start(),e.next=8,r.nextRequest();case 8:return a=e.sent,expect(a.url).toBe("http://tus.io/files/"),expect(a.method).toBe("POST"),a.respondWith({status:201,responseHeaders:{Location:"/files/foo"}}),e.next=14,r.nextRequest();case 14:return a=e.sent,expect(a.url).toBe("http://tus.io/files/foo"),expect(a.method).toBe("PATCH"),a.respondWith({status:204,responseHeaders:{"Upload-Offset":5}}),e.next=20,r.nextRequest();case 20:return a=e.sent,expect(a.url).toBe("http://tus.io/files/foo"),expect(a.method).toBe("DELETE"),a.respondWith({status:423}),e.next=26,r.nextRequest();case 26:return a=e.sent,expect(a.url).toBe("http://tus.io/files/foo"),expect(a.method).toBe("DELETE"),a.respondWith({status:204}),e.next=32,t;case 32:expect(s.onChunkComplete).toHaveBeenCalled();case 33:case"end":return e.stop()}}),e)})))),it("should stop retrying when all delays are used up",i(o().mark((function e(){var t,r,n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new u,r={httpStack:t,retryDelays:[10,10]},n=l.Upload.terminate("http://tus.io/files/foo",r),e.next=5,t.nextRequest();case 5:return s=e.sent,expect(s.url).toBe("http://tus.io/files/foo"),expect(s.method).toBe("DELETE"),s.respondWith({status:500}),e.next=11,t.nextRequest();case 11:return s=e.sent,expect(s.url).toBe("http://tus.io/files/foo"),expect(s.method).toBe("DELETE"),s.respondWith({status:500}),e.next=17,t.nextRequest();case 17:return s=e.sent,expect(s.url).toBe("http://tus.io/files/foo"),expect(s.method).toBe("DELETE"),s.respondWith({status:500}),e.next=23,expectAsync(n).toBeRejectedWithError(/tus: unexpected response while terminating upload/);case 23:case"end":return e.stop()}}),e)})))),it("should invoke the request and response Promises",i(o().mark((function e(){var t,r,n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new u,r={httpStack:t,onBeforeRequest:function(e){return new Promise((function(t){expect(e.getURL()).toBe("http://tus.io/uploads/foo"),expect(e.getMethod()).toBe("DELETE"),t()}))},onAfterResponse:function(e,t){return new Promise((function(r){expect(e.getURL()).toBe("http://tus.io/uploads/foo"),expect(e.getMethod()).toBe("DELETE"),expect(t.getStatus()).toBe(204),r()}))}},spyOn(r,"onBeforeRequest"),spyOn(r,"onAfterResponse"),n=l.Upload.terminate("http://tus.io/uploads/foo",r),e.next=7,t.nextRequest();case 7:return s=e.sent,expect(s.url).toBe("http://tus.io/uploads/foo"),expect(s.method).toBe("DELETE"),s.respondWith({status:204}),e.next=13,expectAsync(n).toBeResolved();case 13:expect(r.onBeforeRequest).toHaveBeenCalled(),expect(r.onAfterResponse).toHaveBeenCalled();case 15:case"end":return e.stop()}}),e)}))))}))}))},{"../..":4,"./helpers/utils":60}]},{},[58]);
//# sourceMappingURL=/sm/30c47306b64bc80b166bdafc535b45eaf899c0a908db1b2afb4703d7473efa96.map